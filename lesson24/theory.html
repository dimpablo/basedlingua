<!DOCTYPE html>

<html lang="ru">
<head>
<script src="./../dictionary.js">//dictionary.js содержит переменную charData используемую для подсказок таблицы! НЕ УДАЛЯТЬ! КРИТИЧЕСКИ ВАЖЕН!</script>
<meta charset="utf-8"/>
<title>Урок 24 — Древнекитайский язык по Крюкову</title>
<style>
        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            line-height: 1.8;
            margin: 50px auto;
            background-color: #fbf8f0;
            color: #2c3e50;
            max-width: 1000px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #1a4f72;
            font-weight: normal;
            letter-spacing: 0.5px;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
            border-bottom: 2px solid #1a4f72;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }
        h2 {
            text-align: center;
            font-size: 1.5em;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }
        h3 {
            font-size: 1.2em;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 30px;
        }
        .original {
            background-color: #f0f4f8;
            padding: 18px 20px;
            border-left: 6px solid #1a4f72;
            font-size: 1.08em;
            line-height: 1.6;
            border-radius: 0 8px 8px 0;
        }
        .text, .grammar, .lexicon, .assignment {
            margin-bottom: 45px;
        }
        .footer {
            font-size: 0.85em;
            color: #777;
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            line-height: 1.4;
        }
        .example {
            display: block;
            margin: 8px 0 8px 15px;
            font-family: "Courier New", monospace;
            font-size: 0.95em;
            color: #1a4f72;
        }
        ol {
            line-height: 1.8;
        }

        /* === Интерактивные подсказки для иероглифов === */
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .char-item {
            position: relative;
            display: inline-block;
            background: #f0f4f8;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.1em;
            text-align: center;
            transition: background-color 0.2s;
        }

        .char-item:hover {
            background: #e6f2ff;
        }

        .char-item > span {
            cursor: help;
        }

        .inline-pinyin {
            font-size: 0.85em;
            color: #555;
            margin-left: 4px;
            font-style: italic;
        }

        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 260px;
            background: #1a4f72;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-align: left;
            white-space: normal;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
            pointer-events: none;
        }

        .char-item:hover .char-tooltip {
            display: block;
        }
    </style>
<style>
        @font-face {
            font-family: 'Jiaguwen';
            src: url('../jiaguwen.ttf') format('truetype');
            font-style: normal;
            font-weight: normal;
            font-display: swap;
        }
    </style>
<style id="2change">
        .oracle-table {
            border-collapse: collapse;
            margin: 20px auto;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.3em;
            table-layout: fixed;
            width: 95%;
            max-width: 1200px;
        }
        .oracle-table td {
            padding: 6px 8px;
            border: 1px solid #d4d4d4;
            text-align: center;
            position: relative;
            word-break: keep-all;
            white-space: nowrap;
        }
        .line-num, .col-num {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            font-size: 0.85em;
            white-space: nowrap;
        }
    </style>
<style>
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #1a5fb4;
        }
        input:checked + .slider:before {
            transform: translateX(30px);
        }
    </style>
<style>
        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 300px;
            background: #1a4f72;
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 0.9em;
            text-align: left;
            white-space: normal;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
        }
        td:hover .char-tooltip {
            display: block;
        }
        .lesson-badge {
            display: inline-block;
            background: #e6f2ff;
            color: #1a4f72;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        /* Стили для правой фигурной скобки, объединяющей строки справа */
        .math-example {
            margin: 15px 0;
            display: flex;
            align-items: center;
            font-size: 0.95em;
        }
        .math-content {
            display: flex;
            flex-direction: column;
            text-align: left;
            margin-right: 12px; /* Отступ между текстом и скобкой */
        }
        .math-content .example {
            margin: 2px 0;
            white-space: pre; /* Сохраняем пробелы */
        }
        .math-brace {
            font-size: 2em; /* Большая скобка */
            line-height: 0.7;
            color: #1a4f72;
            font-family: monospace;
            font-weight: bold;
            margin: 0;
        }
        .math-caption {
            margin-left: 15px;
            font-style: italic;
            color: #1a4f72;
        }
    </style>
</head>
<body>
<h1>УРОК 24</h1>
<!-- ТАБЛИЦА ТЕКСТ УРОКА -->
<div class="text">
<h2>Lesson Text</h2>
<table class="oracle-table" id="oracleTable"></table>
</div>
<div style="text-align: center; margin: 20px 0;">
<label class="toggle-switch">
<input id="fontToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span id="toggleLabel" style="margin-left: 10px; font-family: 'Segoe UI', sans-serif; color: #333;">
        Обычный вид
    </span>
</div>
<script>
    // Данные текста урока 24 (по строкам из предоставленного массива)
    const lessonText = [
        "唯王五月初吉丁亥齊辟鞄叔之孫齊",
        "仲之子命作子仲姜寶鎛用祈侯氏永",
        "命萬年命保其身用享用孝于皇祖聖",
        "叔皇妣聖姜于皇祖又成惠叔皇妣又",
        "成惠姜皇考齊仲皇母用祈壽老毋死",
        "保吾兄弟用求考命彌生肅肅義政保",
        "吾子甥鮑叔又成榮于齊邦侯氏賜之",
        "邑二百又九十又九邑與邑之民人都",
        "鄙侯氏從告之曰萬世至於予孫子勿",
        "有渝改鞄子曰余彌心畏忌余四事是",
        "以余為大工大史大徒大宰是以可使",
        "子孫永保用享"
    ];

    // Функция для создания таблицы
    function createOracleTable() {
        const table = document.getElementById('oracleTable');
        table.innerHTML = ''; // Очистка таблицы перед заполнением
        // Создаём строку с номерами колонок
        const headerRow = document.createElement('tr');
        const emptyCell = document.createElement('td');
        emptyCell.className = 'line-num';
        headerRow.appendChild(emptyCell);
        for (let i = 1; i <= 15; i++) {
            const th = document.createElement('td');
            th.className = 'col-num';
            th.textContent = i;
            headerRow.appendChild(th);
        }
        table.appendChild(headerRow);

        // Создаём строки с текстом
        for (let i = 0; i < lessonText.length; i++) {
            const row = document.createElement('tr');
            const lineNumCell = document.createElement('td');
            lineNumCell.className = 'line-num';
            lineNumCell.textContent = i + 1;
            row.appendChild(lineNumCell);

            const chars = Array.from(lessonText[i].replace(/\s+/g, ' ')).filter(ch => ch.trim() !== '');
            for (let j = 0; j < 15; j++) {
                const td = document.createElement('td');
                if (j < chars.length) {
                    const char = chars[j];
                    td.textContent = char;
                    if (charData[char]) {
                        const tooltip = document.createElement('div');
                        tooltip.className = 'char-tooltip';
                        tooltip.innerHTML = `
                            <strong>${char}</strong> <em>${charData[char].pinyin}</em><br>
                            ${charData[char].meaning}<br>
                            <span class="lesson-badge">Урок ${charData[char].lesson}</span>
                        `;
                        td.appendChild(tooltip);
                    }
                }
                row.appendChild(td);
            }
            table.appendChild(row);
        }
    }

    // Инициализация таблицы при загрузке страницы
    document.addEventListener('DOMContentLoaded', createOracleTable);
</script>
<!-- КОНЕЦ ТАБЛИЦЫ ТЕКСТ УРОКА -->
<!-- ГРАММАТИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="grammar">
<h2>GRAMMAR COMMENTARY</h2>
<h3>24.1. The personal pronoun 吾 wú</h3>
<p class="original">
The appearance of the first-person singular personal pronoun 吾 wú in 6th-century BCE texts is one manifestation of the transformation of the personal pronoun system discussed above.
<br/><br/>
However, the widespread use of this pronoun began later. It is rare during the period under consideration. Its use reveals characteristics of later personal pronouns. This is primarily due to the use of the same pronoun as both a subject, object, and attribute. Previously, as we already know, these functions of personal pronouns were clearly distinguished.
</p>
<h3>24.2. The personal pronoun 予 yú</h3>
<p class="original">
This pronoun, already known to us from the Shangshu texts, appears in inscriptions only in the late preclassical period. It exhibits the same characteristics as 吾 wú. The text of this lesson notes the use of this pronoun in a possessive sense: <span class="example">予 孫 子 yú sūn zǐ</span> "my grandchildren and children."
<br/><br/>
It is characteristic that the older pronoun 余 yú is used simultaneously with 予 yú.
</p>
<h3>24.3. The Functional Word 與 yǔ</h3>
<p class="original">
In the Archaic and Early Preclassical languages, the function word 眔 dà was widely used, serving as a conjunction connecting nouns and a preposition denoting togetherness. In the Late Preclassical language, 眔 dà is almost completely abandoned. It was replaced by new function words, in particular 與 yǔ.
<br/><br/>
與 yǔ can connect names or noun phrases: <span class="example">女 與 士 nǚ yǔ shì</span> "girl and warrior"; <span class="example">邑 與 邑 之 民 人 yì yǔ yì zhī mín rén</span> "cities and city dwellers".
<br/><br/>
Furthermore, the function word 與 yǔ, like 眔 dà, can function as a preposition meaning "with," "together with," or "together with." In this case, 與 yǔ shares a characteristic of the 以 yǐ prepositional group: if the indirect object it forms is placed before the predicate, the object itself can be omitted. This means that 與 yǔ is not necessarily followed by a noun. With the omitted object, the preposition 與 yǔ can precede the predicate: <span class="example">不 可 與 處 bù kě yǔ chǔ</span> "It is impossible to live together [with him]."
</p>
<h3>24.4. Preposition 於 yú</h3>
<p class="original">
The preposition 於 yú, which appears in the late preclassical language, is similar to the earlier 于 yú, which, beginning in the second quarter of the 1st millennium BCE, is falling out of use.
<br/><br/>
According to B. Karlgren, who studied the language of the Zuozhuan Chronicle, the differences in the use of the prepositions 于 yú and 於 yú are due not to chronological but to dialectal differences: a number of classical period texts (the Analects, the Mengzi) were written in one dialect, while the Zuozhuan was written in another. Therefore, the Mengzi predominantly uses the preposition 於 yú, while the Zuozhuan Chronicle uses both 於 yú and 于 yú.
<br/><br/>
It is difficult to agree with this opinion. The preposition 於 yú, completely unknown in the archaic and early preclassical languages, first appears in inscriptions of the Eastern Zhou era, where it often coexists with the earlier 于 yú (which is the case, for example, in the text of lesson 24). The same is observed in the Zuozhuan, where the ratio of the prepositions 於 yú and 于 yú is 19:17. In the Analects, this ratio is 21:1, and in the Mengzi, 96:4. Moreover, three out of four times the preposition 于 yú is used in the Mengzi in quotations from the Shangshu and Shijing. Thus, the occurrence of both prepositions in the Zuozhuan text most likely only indicates that this work was written earlier than the Analects and Mencius.
</p>
<h3>24.5. Modal Predicate 可 kě</h3>
<p class="original">
The predicate 可 kě is used in the same meaning as the earlier 克 kè "to be able," "to be able." 克 kè is not found in texts of the late preclassical period. It is also not found in the classical language.
</p>
<h3>24.6. Imperative Predicate 使 shǐ</h3>
<p class="original">
The predicate 使 shǐ means "to force," "to make so that..."; it requires another, primary predicative after it. </p>
</div>
<h2>СПИСОК СЛОВ УРОКА</h2>
<div class="char-list"></div>
<script>
    // Укажи номер урока здесь
    const LESSON = parseInt((window.location.pathname.match(/\/lesson(\d+)(?:\/|$)/) || [])[1] || '1');

    // Находим все иероглифы этого урока из charData
    const lessonChars = Object.entries(charData)
        .filter(([char, data]) => data.lesson === LESSON)
        .sort(([charA, dataA], [charB, dataB]) => {
            // Сортировка по пиньиню (опционально)
            return dataA.pinyin.localeCompare(dataB.pinyin, 'zh');
        });

    // Получаем контейнер
    const charList = document.querySelector('.char-list');

    // Очищаем (на всякий случай)
    charList.innerHTML = '';

    // Генерируем элементы
    lessonChars.forEach(([char, data]) => {
        const item = document.createElement('div');
        item.className = 'char-item';

        item.innerHTML = `
            <span>${char}<span class="inline-pinyin">${data.pinyin}</span></span>
            <div class="char-tooltip">${data.meaning}</div>
        `;

        charList.appendChild(item);
    });
</script>

<div class="lexicon">
<h2>LEXICAL COMMENTARY</h2>
<h3>24.A. Pao-shu of the Kingdom of Qi</h3>
<p class="original">
Some scholars suggest that the text refers to one of the famous figures of the Kingdom of Qi, Bao-shu Ya. He was a friend of Guan Zhong, the first minister of the "hegemon" Huan-gong.
<br/><br/>
The beginning of the text, which seems to speak of "the ruler of Qi, Pao-shu," raises some doubts about this meaning. But Bao-shu Ya, being an aristocrat of the rank of dafu, could well be called “the ruler of Pao-shu from the kingdom of Qi.”
</p>
</div>
<div class="assignment">
<h2>ASSIGNMENT FOR INDEPENDENT STUDY</h2>
<ol>
<li>Rewrite the text, adding punctuation marks.</li>
<li>Translate the text into Russian.</li>
<li>Answer the question: What changes occurred in the personal pronoun system of the late pre-classical language?</li>
</ol>
</div>
<div class="footer">
Textbook: V. A. Kryukov - Archaic Old Chinese.<br>
Recovered using OCR, preserving the author's style and adding pinyin.<br>
All characters are from Lessons 1–24, or from cyclic characters (甲子 – 癸亥).
</br></br></div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggle = document.getElementById('fontToggle');
        const label = document.getElementById('toggleLabel');
        const styleSheet = document.getElementById('2change');

        const normalCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        const oracleCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Jiaguwen', 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        styleSheet.textContent = normalCSS;

        toggle.addEventListener('change', function () {
            if (toggle.checked) {
                styleSheet.textContent = oracleCSS;
                label.textContent = 'Оракульный вид';
            } else {
                styleSheet.textContent = normalCSS;
                label.textContent = 'Обычный вид';
            }
        });
    });
</script>
</body>
<script id="help" src="../help.js"></script>
</html>