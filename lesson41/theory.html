<!DOCTYPE html>

<html lang="ru">
<head>
<script src="./../dictionary.js">//dictionary.js содержит переменную charData используемую для подсказок таблицы! НЕ УДАЛЯТЬ! КРИТИЧЕСКИ ВАЖЕН!</script>
<meta charset="utf-8"/>
<title>Урок 41 — Древнекитайский язык по Крюкову</title>
<style>
        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            line-height: 1.8;
            margin: 50px auto;
            background-color: #fbf8f0;
            color: #2c3e50;
            max-width: 1000px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #1a4f72;
            font-weight: normal;
            letter-spacing: 0.5px;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
            border-bottom: 2px solid #1a4f72;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }
        h2 {
            text-align: center;
            font-size: 1.5em;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }
        h3 {
            font-size: 1.2em;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 30px;
        }
        .original {
            background-color: #f0f4f8;
            padding: 18px 20px;
            border-left: 6px solid #1a4f72;
            font-size: 1.08em;
            line-height: 1.6;
            border-radius: 0 8px 8px 0;
        }
        .text, .grammar, .lexicon, .assignment {
            margin-bottom: 45px;
        }
        .footer {
            font-size: 0.85em;
            color: #777;
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            line-height: 1.4;
        }
        .example {
            display: block;
            margin: 8px 0 8px 15px;
            font-family: "Courier New", monospace;
            font-size: 0.95em;
            color: #1a4f72;
        }
        ol {
            line-height: 1.8;
        }

        /* === Интерактивные подсказки для иероглифов === */
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .char-item {
            position: relative;
            display: inline-block;
            background: #f0f4f8;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.1em;
            text-align: center;
            transition: background-color 0.2s;
        }

        .char-item:hover {
            background: #e6f2ff;
        }

        .char-item > span {
            cursor: help;
        }

        .inline-pinyin {
            font-size: 0.85em;
            color: #555;
            margin-left: 4px;
            font-style: italic;
        }

        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 260px;
            background: #1a4f72;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-align: left;
            white-space: normal;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
            pointer-events: none;
        }

        .char-item:hover .char-tooltip {
            display: block;
        }
    </style>
<style>
        @font-face {
            font-family: 'Jiaguwen';
            src: url('../jiaguwen.ttf') format('truetype');
            font-style: normal;
            font-weight: normal;
            font-display: swap;
        }
    </style>
<style id="2change">
        .oracle-table {
            border-collapse: collapse;
            margin: 20px auto;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.3em;
            table-layout: fixed;
            width: 95%;
            max-width: 1200px;
        }
        .oracle-table td {
            padding: 6px 8px;
            border: 1px solid #d4d4d4;
            text-align: center;
            position: relative;
            word-break: keep-all;
            white-space: nowrap;
        }
        .line-num, .col-num {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            font-size: 0.85em;
            white-space: nowrap;
        }
    </style>
<style>
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #1a5fb4;
        }
        input:checked + .slider:before {
            transform: translateX(30px);
        }
    </style>
<style>
        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 300px;
            background: #1a4f72;
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 0.9em;
            text-align: left;
            white-space: normal;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
        }
        td:hover .char-tooltip {
            display: block;
        }
        .lesson-badge {
            display: inline-block;
            background: #e6f2ff;
            color: #1a4f72;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        /* Стили для правой фигурной скобки, объединяющей строки справа */
        .math-example {
            margin: 15px 0;
            display: flex;
            align-items: center;
            font-size: 0.95em;
        }
        .math-content {
            display: flex;
            flex-direction: column;
            text-align: left;
            margin-right: 12px; /* Отступ между текстом и скобкой */
        }
        .math-content .example {
            margin: 2px 0;
            white-space: pre; /* Сохраняем пробелы */
        }
        .math-brace {
            font-size: 2em; /* Большая скобка */
            line-height: 0.7;
            color: #1a4f72;
            font-family: monospace;
            font-weight: bold;
            margin: 0;
        }
        .math-caption {
            margin-left: 15px;
            font-style: italic;
            color: #1a4f72;
        }
        .image-container-inline {
            float: right;
            margin: 10px 0 10px 15px;
            text-align: center;
            max-width: 40%;
        }
        .lesson-image-inline {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .image-caption-inline {
            font-size: 0.85em;
            color: #555;
            margin-top: 5px;
            font-style: italic;
        }
        .clearfix::after {
            content: "";
            display: table;
            clear: both;
        }
        table.data-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 0.95em;
        }
        table.data-table th, table.data-table td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: left;
            vertical-align: top;
        }
        table.data-table th {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
        }
        table.data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
<h1>УРОК 41</h1>
<!-- ТАБЛИЦА ТЕКСТ УРОКА -->
<div class="text">
<h2>Lesson Text</h2>
<table class="oracle-table" id="oracleTable"></table>
</div>
<div style="text-align: center; margin: 20px 0;">
<label class="toggle-switch">
<input id="fontToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span id="toggleLabel" style="margin-left: 10px; font-family: 'Segoe UI', sans-serif; color: #333;">
    Обычный вид
</span>
</div>
<script>
const lessonText = [
    "平原君趙勝者趙之諸公子也諸子中",
    "勝最賢喜賓客賓客蓋至者數千人平",
    "原君家樓臨民家民家有躄者槃散行",
    "汲平原君美人居樓上臨見大笑之明",
    "日躄者至平原君門請曰臣聞君之喜",
    "士士不遠千里而至者以君能貴士而",
    "賤妾也臣不幸有罷癃之病而君之後",
    "宮臨而笑臣臣願得笑臣者頭平原君",
    "笑應曰諾躄者去平原君笑曰觀此豎",
    "子乃欲以一笑之故殺吾美人不亦甚",
    "乎終不殺居歳餘賓客門下舍人稍稍",
    "引去者過半平原君怪之曰勝所以待",
    "諸君者未嘗敢失禮而去者何多也門",
    "下一人前對曰以君之不殺笑躄者以",
    "君為愛色而賤士士即去耳於是平原",
    "君乃斬笑躄者美人頭自造門進躄者",
    "因謝焉其後門下乃復稍稍來"
];

// Функция для создания таблицы
function createOracleTable() {
    const table = document.getElementById('oracleTable');
    
    // Создаём строку с номерами колонок
    const headerRow = document.createElement('tr');
    
    // Пустая ячейка для выравнивания с номерами строк
    const emptyCell = document.createElement('td');
    emptyCell.className = 'line-num';
    headerRow.appendChild(emptyCell);
    
    // Номера колонок: от 1 до 15
    for (let i = 1; i <= 15; i++) {
        const th = document.createElement('td');
        th.className = 'col-num';
        th.textContent = i;
        headerRow.appendChild(th);
    }
    table.appendChild(headerRow);
    
    // Создаём строки с текстом
    for (let i = 0; i < lessonText.length; i++) {
        const row = document.createElement('tr');
        
        // Номер строки
        const lineNumCell = document.createElement('td');
        lineNumCell.className = 'line-num';
        lineNumCell.textContent = i + 1;
        row.appendChild(lineNumCell);
        
        // Разбиваем строку на символы
        const chars = Array.from(lessonText[i]);
        
        // Заполняем ячейки для позиций 1–15
        for (let j = 0; j < 15; j++) {  // Ровно 15 ячеек
            const td = document.createElement('td');
            
            // Если есть символ на этой позиции — ставим его
            if (j < chars.length && chars[j].trim() !== '') {
                const char = chars[j];
                td.textContent = char;
                
                if (charData[char]) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'char-tooltip';
                    tooltip.innerHTML = `
                        <strong>${char}</strong> <em>${charData[char].pinyin}</em><br>
                        ${charData[char].meaning}<br>
                        <span class="lesson-badge">Урок ${charData[char].lesson}</span>
                    `;
                    td.appendChild(tooltip);
                }
            }
            // Если символа нет — ячейка остаётся пустой (ничего не делаем)
            row.appendChild(td);
        }
        
        table.appendChild(row);
    }
}

// Инициализация таблицы при загрузке страницы
document.addEventListener('DOMContentLoaded', createOracleTable);
</script>
<!-- КОНЕЦ ТАБЛИЦЫ ТЕКСТ УРОКА -->
<!-- ГРАММАТИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="grammar">
<h2>GRAMMAR COMMENTARY</h2>
<h3>41.1. Proper Names in the Predicative Function
<p class="original">
We have already encountered some examples of the use of proper names as common nouns in the predicative function in the early classical language (38.1). A specific example of this type of use of proper names in the "Historical Records" of Sima Qian is the construction of the first mention of this name in a biography. In this construction, the proper name is used in the predicative function "to be called by a name" or "to be known by such-and-such a name":
<br/><br/>
<span class="example">平原君趙勝者 píng yuán jūn zhào shèng zhě</span> "the one known by the name of Zhao Sheng, who bore the title Pingyuan-jun";
<br/>
<span class="example">門下有毛遂者 mén xià yǒu máo suí zhě</span> "Among his parasites was someone named Mao Sui."
</p>
<h3>41.2. Function word <span class="example">即 jí</span></h3>
<p class="original">
From the pre-classical language, we know the function word <span class="example">乃 nǎi</span> (16.3), one of the functions of which was to indicate the chronological and logical sequence of actions. In this meaning, <span class="example">乃 nǎi</span> continues to be used in the Late Classical:
<br/>
<span class="example">臣乃今日請處囊中 chén nǎi jīn rì qǐng chù náng zhōng</span> "And so today I ask permission to be in the sack."
<br/><br/>
Along with <span class="example">乃 nǎi</span>, the Late Classical language begins to use a new function word, <span class="example">即 jí</span>, for the same purpose. Like <span class="example">乃 nǎi</span>, it usually comes before the predicate:
<br/>
<span class="example">項伯許諾,即夜復去 xiàng bó xǔ nuò, jí yè fù qù</span> "Xiang Bo agreed and set off back at night."
<br/><br/>
<span class="example">乃 nǎi</span> and <span class="example">即 jí</span> have another meaning as well. They can be used as a connective tissue with the emphatic nuance "to be none other than...", "to be precisely...":
<br/>
<span class="example">非其父兄,即其子弟 fēi qí fù xiōng, jí qí zǐ dì</span> "[if] not his father or older brother, then certainly his younger brother or son";
<br/>
<span class="example">Fan Kuai was an old friend of the emperor and a man of great merit, and he was none other than the husband of Lü Xu, the empress's younger sister.
</span></p>
<h3>41.3. The functional phrase <span class="example">於是 yú shì</span></h3>
<p class="original">
The phrase <span class="example">於是 yú shì</span> is used as a synonym for <span class="example">乃 nǎi</span> and <span class="example">即 jí</span> in their primary meaning—to express a sequence of actions—but, unlike them, can appear before both the predicate and the subject:
<br/>
<span class="example">王於是曰 wáng yú shì yuē</span> "And then the ruler said: '...”"
<br/>
<span class="example">於是王召見 yú shì wáng zhào jiàn</span> "And then the ruler summoned him."
<br/><br/>
Sometimes the phrase <span class="example">於是 yú shì</span>, when placed before the subject, is duplicated by <span class="example">乃 nǎi</span>, which is placed before the predicate:
<br/>
<span class="example">於是平原君乃斬笑躄者美人頭 yú shì píng yuán jūn nǎi zhǎn xiào bì zhě měi rén tóu</span> "And then Pingyuan-jun chopped off the head of the beauty who laughed at the lame man."
</p>
<h3>41.4. The construction <span class="example">者以... zhě yǐ...</span> and the conjunction <span class="example">蓋 gài</span></h3>
<p class="original">
A subordinate clause of cause usually appears before the main clause in a complex sentence and is joined to it by the conjunction <span class="example">故 gù</span> (17.2). However, such a subordinate clause can also appear after the main clause. For this, a combination of function words <span class="example">者以 zhě yǐ</span> is used, the first of which closes the main clause, and the second introduces a subordinate clause:
<br/>
<span class="example">士不遠千里而至者,以君能貴士 shì bù yuǎn qiān lǐ ér zhì zhě, yǐ jūn néng guì shì</span> "The men came, not counting the distance of 1000 li, because you are able to appreciate them."
<br/><br/>
Another way to form a subordinate clause of cause in a postposition is to attach it to the main clause using the conjunction <span class="example">蓋 gài</span>:
<br/>
<span class="example">孔子罕稱命,蓋難言之也 kǒng zǐ hǎn chēng mìng, gài nán yán zhī yě</span> "Confucius rarely spoke about fate because it is difficult to talk about."
<br/><br/>
Besides the above, the function word <span class="example">蓋 gài</span> has another meaning in the late classical language. It indicates that the message recorded in this sentence is not absolutely reliable, that the author has certain doubts about it, etc. The word <span class="example">蓋 gài</span> behaves in this case as an adverb and is placed before the predicate. It can be translated into Russian as "they say that...", "according to rumors", "as if":
<br/>
<span class="example">太史公曰余登箕山,其上蓋有許由塚云 tài shǐ gōng yuē yú dēng jī shān, qí shàng gài yǒu xǔ yóu zhǒng yún</span> "Taishigong said: 'I climbed Mount Qishan, where they say Xu Yu's tomb is located.'" <br/><br/>
In the example given, the final <span class="example">云 yún</span> duplicates the preceding <span class="example">蓋 gài</span>, although it can also convey the corresponding meaning on its own:
<br/>
<span class="example">見大人跡云 jiàn dà rén jī yún</span> "As if they saw the footprints of a giant."
</p>
<h3>41.5. Preposition <span class="example">因 yīn</span></h3>
<p class="original">
The preposition <span class="example">因 yīn</span> is close in meaning to <span class="example">以 yǐ</span>, grammatically belonging to the same group (21.5).
<br/><br/>
<span class="example">因 yīn</span>, just like <span class="example">以 yǐ</span>, denotes an instrument of action, but not in a literal, but in a figurative sense, that is, it indicates the circumstances, conditions or persons thanks to which this action was possible: 
<br/>
<span class="example">今政治和平,世無兵革,上下相安,何因當有大水一日暴至 jīn zhèng zhì hé píng, shì wū bīng gé, shàng xià xiāng ān, hé yīn dāng yǒu dà shuǐ yī rì bào zhì</span> "Now a just government is being exercised, there are no wars in the world, the upper and lower classes are at peace, so why would a flood suddenly start?"
<br/>
<span class="example">魏使人人因平原君請縱於趙 wèi shǐ rén yīn píng yuán jūn qǐng zòng yú zhào</span> "The state of Wei sent a man to conclude an alliance with Zhao through Pingyuan-jun."
</p>
<h3>41.6. The construction <span class="example">不亦...乎 bù yì... hū</span></h3>
<p class="original">
This phrase is used to express a rhetorical question, "isn't it...", "after all," etc.:
<br/>
<span class="example">學而時習之,不亦悦乎 xué ér shí xí zhī, bù yì yuè hū</span> "Studying and constantly repeating what you've learned, isn't that joyful?"
</p>
</h3></div>
<h2>СПИСОК СЛОВ УРОКА</h2>
<div class="char-list"></div>
<script>
    // Укажи номер урока здесь
    const LESSON = parseInt((window.location.pathname.match(/\/lesson(\d+)(?:\/|$)/) || [])[1] || '1');

    // Находим все иероглифы этого урока из charData
    const lessonChars = Object.entries(charData)
        .filter(([char, data]) => data.lesson === LESSON)
        .sort(([charA, dataA], [charB, dataB]) => {
            // Сортировка по пиньиню (опционально)
            return dataA.pinyin.localeCompare(dataB.pinyin, 'zh');
        });

    // Получаем контейнер
    const charList = document.querySelector('.char-list');

    // Очищаем (на всякий случай)
    charList.innerHTML = '';

    // Генерируем элементы
    lessonChars.forEach(([char, data]) => {
        const item = document.createElement('div');
        item.className = 'char-item';

        item.innerHTML = `
            <span>${char}<span class="inline-pinyin">${data.pinyin}</span></span>
            <div class="char-tooltip">${data.meaning}</div>
        `;

        charList.appendChild(item);
    });
</script>

<div class="lexicon">
<h2>LEXICAL COMMENTARY</h2>
<h3>41.A. Pingyuan-jun</h3>
<p class="original">
During the Zhangguo era, many high-ranking officials were given the title of "governor" (<span class="example">君 jūn</span>) of a particular region. Zhao Sheng of the State of Zhao was the governor of the Pingyuan region.
</p>
<h3>41.B. "Freeloader Guests"</h3>
<p class="original">
Aristocrats of the Zhangguo era often kept a large number of hangers-on in their homes, consisting of wandering scholars or other figures who had found no place in government service. Such people were called <span class="example">賓客 bīn kè</span> "guests," <span class="example">舍人 shè rén</span> "people of the courtyard," <span class="example">食客 shí kè</span> "freeloaders," <span class="example">門下 mén xià</span> "people at the gate."
<br/><br/>
"People of the courtyard" at the master's table
<br/>
The aristocrat in whose house they lived fed them, and they, in turn, served him with their knowledge and, if necessary, with their strength.
</p>
</div>
<div style="text-align: center; margin: 20px 0;">
<img alt="«Люди подворья» за хозяйским столом" class="original" src="./img/page_7_img_1.jpeg" style="border: none; padding: 0; max-width: 100%;"/>
<p class="footer" style="margin-top: 8px; border-top: none; padding-top: 0;">«Люди подворья» за хозяйским столом</p>
</div>
<div class="assignment">
<h2>ASSIGNMENT FOR INDEPENDENT WORK</h2>
<ol>
<li>Rewrite the text, adding punctuation marks.</li>
<li>Perform a grammatical analysis of the text.</li>
<li>Translate the text into Russian Language.</li>
<li>List all known means of denoting the chronological or logical sequence of several actions used in Late Classical Chinese.</li>
</ol>
</div>
<div class="footer">
Textbook: V. A. Kryukov - Archaic Old Chinese.<br>
Recovered using OCR, preserving the author's style and adding pinyin.<br>
All characters are from Lessons 1–40, or from cyclic characters (甲子 – 癸亥).
</br></br></div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggle = document.getElementById('fontToggle');
        const label = document.getElementById('toggleLabel');
        const styleSheet = document.getElementById('2change');

        const normalCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        const oracleCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Jiaguwen', 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        styleSheet.textContent = normalCSS;

        toggle.addEventListener('change', function () {
            if (toggle.checked) {
                styleSheet.textContent = oracleCSS;
                label.textContent = 'Оракульный вид';
            } else {
                styleSheet.textContent = normalCSS;
                label.textContent = 'Обычный вид';
            }
        });
    });
</script>
</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const table = document.getElementById('oracleTable');
        if (!table) return;

        const rows = table.querySelectorAll('tr');
        rows.forEach(row => {
            const cells = row.querySelectorAll('td');
            cells.forEach(cell => {
                const cellText = cell.textContent.trim();
                if (cellText === '_') {
                    cell.textContent = '';
                } else if (cellText === '|') {
                    cell.style.backgroundColor = '#e0bfb8';
                    cell.textContent = '';
                }
            });
        });
    });
</script>
<script id="help" src="../help.js"></script>
</html>