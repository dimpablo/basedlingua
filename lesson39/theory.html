<!DOCTYPE html>

<html lang="ru">
<head>
<script src="./../dictionary.js">//dictionary.js содержит переменную charData используемую для подсказок таблицы! НЕ УДАЛЯТЬ! КРИТИЧЕСКИ ВАЖЕН!</script>
<meta charset="utf-8"/>
<title>Урок 39 — Древнекитайский язык по Крюкову</title>
<style>
        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            line-height: 1.8;
            margin: 50px auto;
            background-color: #fbf8f0;
            color: #2c3e50;
            max-width: 1000px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #1a4f72;
            font-weight: normal;
            letter-spacing: 0.5px;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
            border-bottom: 2px solid #1a4f72;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }
        h2 {
            text-align: center;
            font-size: 1.5em;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }
        h3 {
            font-size: 1.2em;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 30px;
        }
        .original {
            background-color: #f0f4f8;
            padding: 18px 20px;
            border-left: 6px solid #1a4f72;
            font-size: 1.08em;
            line-height: 1.6;
            border-radius: 0 8px 8px 0;
        }
        .text, .grammar, .lexicon, .assignment {
            margin-bottom: 45px;
        }
        .footer {
            font-size: 0.85em;
            color: #777;
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            line-height: 1.4;
        }
        .example {
            display: block;
            margin: 8px 0 8px 15px;
            font-family: "Courier New", monospace;
            font-size: 0.95em;
            color: #1a4f72;
        }
        ol {
            line-height: 1.8;
        }

        /* === Интерактивные подсказки для иероглифов === */
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .char-item {
            position: relative;
            display: inline-block;
            background: #f0f4f8;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.1em;
            text-align: center;
            transition: background-color 0.2s;
        }

        .char-item:hover {
            background: #e6f2ff;
        }

        .char-item > span {
            cursor: help;
        }

        .inline-pinyin {
            font-size: 0.85em;
            color: #555;
            margin-left: 4px;
            font-style: italic;
        }

        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 260px;
            background: #1a4f72;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-align: left;
            white-space: normal;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
            pointer-events: none;
        }

        .char-item:hover .char-tooltip {
            display: block;
        }
    </style>
<style>
        @font-face {
            font-family: 'Jiaguwen';
            src: url('../jiaguwen.ttf') format('truetype');
            font-style: normal;
            font-weight: normal;
            font-display: swap;
        }
    </style>
<style id="2change">
        .oracle-table {
            border-collapse: collapse;
            margin: 20px auto;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.3em;
            table-layout: fixed;
            width: 95%;
            max-width: 1200px;
        }
        .oracle-table td {
            padding: 6px 8px;
            border: 1px solid #d4d4d4;
            text-align: center;
            position: relative;
            word-break: keep-all;
            white-space: nowrap;
        }
        .line-num, .col-num {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            font-size: 0.85em;
            white-space: nowrap;
        }
    </style>
<style>
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #1a5fb4;
        }
        input:checked + .slider:before {
            transform: translateX(30px);
        }
    </style>
<style>
        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 300px;
            background: #1a4f72;
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 0.9em;
            text-align: left;
            white-space: normal;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
        }
        td:hover .char-tooltip {
            display: block;
        }
        .lesson-badge {
            display: inline-block;
            background: #e6f2ff;
            color: #1a4f72;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        /* Стили для правой фигурной скобки, объединяющей строки справа */
        .math-example {
            margin: 15px 0;
            display: flex;
            align-items: center;
            font-size: 0.95em;
        }
        .math-content {
            display: flex;
            flex-direction: column;
            text-align: left;
            margin-right: 12px; /* Отступ между текстом и скобкой */
        }
        .math-content .example {
            margin: 2px 0;
            white-space: pre; /* Сохраняем пробелы */
        }
        .math-brace {
            font-size: 2em; /* Большая скобка */
            line-height: 0.7;
            color: #1a4f72;
            font-family: monospace;
            font-weight: bold;
            margin: 0;
        }
        .math-caption {
            margin-left: 15px;
            font-style: italic;
            color: #1a4f72;
        }
        .image-container-inline {
            float: right;
            margin: 10px 0 10px 15px;
            text-align: center;
            max-width: 40%;
        }
        .lesson-image-inline {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .image-caption-inline {
            font-size: 0.85em;
            color: #555;
            margin-top: 5px;
            font-style: italic;
        }
        .clearfix::after {
            content: "";
            display: table;
            clear: both;
        }
        table.data-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 0.95em;
        }
        table.data-table th, table.data-table td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: left;
            vertical-align: top;
        }
        table.data-table th {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
        }
        table.data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
<h1>УРОК 39</h1>
<!-- ТАБЛИЦА ТЕКСТ УРОКА -->
<div class="text">
<h2>Lesson Text</h2>
<table class="oracle-table" id="oracleTable"></table>
</div>
<div style="text-align: center; margin: 20px 0;">
<label class="toggle-switch">
<input id="fontToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span id="toggleLabel" style="margin-left: 10px; font-family: 'Segoe UI', sans-serif; color: #333;">
    Обычный вид
  </span>
</div>
<style>
  .toggle-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 30px;
  }
  .toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 30px;
  }
  .slider:before {
    position: absolute;
    content: "";
    height: 22px;
    width: 22px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  input:checked + .slider {
    background-color: #1a5fb4;
  }
  input:checked + .slider:before {
    transform: translateX(30px);
  }
</style>
<style>/* Уменьшаем размер для номеров */

/* Tooltip — без изменений */
.char-tooltip {
    display: none;
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: max-content;
    max-width: 300px;
    background: #1a4f72;
    color: white;
    padding: 12px 15px;
    border-radius: 6px;
    font-size: 0.9em;
    text-align: left;
    white-space: normal;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
    line-height: 1.5;
}

td:hover .char-tooltip {
    display: block;
}

.lesson-badge {
    display: inline-block;
    background: #e6f2ff;
    color: #1a4f72;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.8em;
    margin-left: 5px;
}</style>
<script>
const lessonText = [
    "任人有問屋廬子曰禮與食孰重曰禮",
    "重色與禮孰重曰禮重曰以禮食則饑",
    "而死不以禮食則得食必以禮乎親迎",
    "則不得妻不親迎則得妻必親迎乎屋",
    "廬子不能對明日之鄒以告孟子孟子",
    "曰於答是也何有不揣其本而齊其末",
    "方寸之木可使高於岑樓金重於羽者",
    "豈謂一鉤金與一輿羽之謂哉取食之",
    "重者與禮之輕者而比之奚翅食重取",
    "色之重者與禮之輕者而比之奚翅色",
    "重往應之曰紾兄之臂而奪之食則得",
    "食不紾則不得食則將紾之乎踰東家",
    "牆而摟其處子則得妻不摟則不得妻",
    "則將摟之乎"
];
// Функция для создания таблицы
function createOracleTable() {
    const table = document.getElementById('oracleTable');
    
    // Создаём строку с номерами колонок
    const headerRow = document.createElement('tr');
    
    // Пустая ячейка для выравнивания с номерами строк
    const emptyCell = document.createElement('td');
    emptyCell.className = 'line-num';
    headerRow.appendChild(emptyCell);
    
    // Номера колонок: от 1 до 15
    for (let i = 1; i <= 15; i++) {
        const th = document.createElement('td');
        th.className = 'col-num';
        th.textContent = i;
        headerRow.appendChild(th);
    }
    table.appendChild(headerRow);
    
    // Создаём строки с текстом
    for (let i = 0; i < lessonText.length; i++) {
        const row = document.createElement('tr');
        
        // Номер строки
        const lineNumCell = document.createElement('td');
        lineNumCell.className = 'line-num';
        lineNumCell.textContent = i + 1;
        row.appendChild(lineNumCell);
        
        // Разбиваем строку на символы
        const chars = Array.from(lessonText[i]);
        
        // Заполняем ячейки для позиций 1–15
        for (let j = 0; j < 15; j++) {  // Ровно 15 ячеек
            const td = document.createElement('td');
            
            // Если есть символ на этой позиции — ставим его
            if (j < chars.length && chars[j].trim() !== '') {
                const char = chars[j];
                td.textContent = char;
                
                if (charData[char]) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'char-tooltip';
                    tooltip.innerHTML = `
                        <strong>${char}</strong> <em>${charData[char].pinyin}</em><br>
                        ${charData[char].meaning}<br>
                        <span class="lesson-badge">Урок ${charData[char].lesson}</span>
                    `;
                    td.appendChild(tooltip);
                }
            }
            // Если символа нет — ячейка остаётся пустой (ничего не делаем)
            row.appendChild(td);
        }
        
        table.appendChild(row);
    }
}

// Инициализация таблицы при загрузке страницы
document.addEventListener('DOMContentLoaded', createOracleTable);
</script>
<!-- КОНЕЦ ТАБЛИЦЫ ТЕКСТ УРОКА -->
<!-- ГРАММАТИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="grammar">
<h2>GRAMMAR COMMENTARY</h2>
<h3>39.1. The interrogative pronoun <span class="example">孰 shú</span></h3>
<p class="original">
Being semantically close to <span class="example">誰 shuí</span> "who?", the pronoun <span class="example">孰 shú</span> suggests the choice of one or more persons from among those already mentioned and can therefore be translated into English as "which?" or "which of?...".
<br/><br/>
The pronoun <span class="example">孰 shú</span> always follows the corresponding noun. In classical Chinese, it is most often used in the construction <span class="example">...與...孰... ...yǔ...shú</span> "A and B, which of them...", where several names are connected by the conjunction <span class="example">與 yǔ</span>, followed by the pronoun <span class="example">孰 shú</span>, and after that a predicate:
<br/>
<span class="example">吾與徐公孰美 wú yǔ xú gōng shú měi</span> "Who is more beautiful - me or Xugong?"
<br/>
<span class="example">師與商也孰賢 shī yǔ shāng yě shú xián</span> “Shi and Shan - who is smarter?” 
<br/><br/> 
Sometimes this design also appears in a slightly more complicated form: 
<br/>
<span class="example">王自以為與周公孰仁且智 wáng zì yǐ wéi yǔ zhōu gōng shú rén qiě zhì</span> “As the ruler himself believes, which of you - you and Zhou Gong - is more humane and wiser?” 
<br/><br/> 
The same construction can be modified and turned into <span class="example">...孰與... ...shú yǔ...</span>: 
<br/>
<span class="example">吾孰與徐公美 wú shú yǔ xú gōng měi</span> “Who is more beautiful - me or Xugong?” 
</p>
<h3>39.2. Construction <span class="example">...者豈謂...之謂哉... zhě qǐ wèi... zhì wèi zāi</span></h3>
<p class="original"> 
This construction can be translated into English with the words “When they talk about A, do they really mean B?” or “Does A really mean B?”
<br/><br/>
Accordingly, a negative answer to this question is possible in the form <span class="example">非謂...之謂也,...之謂也 fēi wèi... zhī wèi yě,...zhī wèi yě</span> "By A we mean not B, but C." For example:
<br/>
<span class="example">所謂故國者非謂有橋木之謂也,有世臣之謂也 suǒ wèi gù guó zhě fēi wèi yǒu qiáo mù zhī wèi yě, yǒu shì chén zhī wèi yě</span> "When people speak of states with long traditions, they don't mean that they have old trees, but that their dignitaries have held their positions for generations."
</p>
<h3>39.3. The construction <span class="example">於...何有 yú... hé yǒu</span></h3>
<p class="original">
The preposition <span class="example">於 yú</span> in this construction can introduce either a name or a noun or predicative phrase. The phrase generally means "what's special about..." or "what's so special about..." (literally, "what is in...").
<br/><br/>
In this text, this phrase is recorded with an object expressed by a predicative phrase and formed by the final particle <span class="example">也 yě</span>:
<br/>
<span class="example">於答是也何有 yú dá shì yě hé yǒu</span> "Is this question difficult to answer?"
</p>
<h3>39.4. Units of Calculation</h3>
<p class="original">
The development of the system of measures and weights in ancient China contributed to a significant increase in the number of names used as units of calculation by the middle of the first millennium BC. At the same time, the grammatical construction itself, used to count substances or objects, also underwent changes.
<br/><br/>
While in archaic and pre-classical languages ​​the numeral and measure name always follow the corresponding name (<span class="example">矢五束 shǐ wǔ shù</span> "five bundles of arrows"; see 10.1, 13.4), a new construction first appears in classical languages ​​and then becomes widespread.
<br/><br/>
In it, the numeral and unit of measurement precede the name:
<br/>
<span class="example">一簞食一豆羹 yī dān shí yī dòu gēng</span> "one basket of food, one cup of soup."
</p>
</div>
<h2>СПИСОК СЛОВ УРОКА</h2>
<div class="char-list"></div>
<script>
    // Укажи номер урока здесь
    const LESSON = parseInt((window.location.pathname.match(/\/lesson(\d+)(?:\/|$)/) || [])[1] || '1');

    // Находим все иероглифы этого урока из charData
    const lessonChars = Object.entries(charData)
        .filter(([char, data]) => data.lesson === LESSON)
        .sort(([charA, dataA], [charB, dataB]) => {
            // Сортировка по пиньиню (опционально)
            return dataA.pinyin.localeCompare(dataB.pinyin, 'zh');
        });

    // Получаем контейнер
    const charList = document.querySelector('.char-list');

    // Очищаем (на всякий случай)
    charList.innerHTML = '';

    // Генерируем элементы
    lessonChars.forEach(([char, data]) => {
        const item = document.createElement('div');
        item.className = 'char-item';

        item.innerHTML = `
            <span>${char}<span class="inline-pinyin">${data.pinyin}</span></span>
            <div class="char-tooltip">${data.meaning}</div>
        `;

        charList.appendChild(item);
    });
</script>
<div class="lexicon">
<h2>LEXICAL COMMENTARY</h2>
<h3>39.A. 禮 lǐ — norms of relationships between people</h3>
<p class="original">
The doctrine of li is one of the cornerstones of Confucian doctrine. According to this teaching, human behavior should be regulated and controlled not by law, as advocates of Legalism demanded, but by traditionally established norms—<span class="example">禮 lǐ</span>.
<br/><br/>
According to Confucius, li was the primary means of achieving the fundamental ideal of a noble person—humanity. On the other hand, li can only exist on the basis of humanity. "If one is human and does not strive for humanity, what kind of life can one possibly have?" Confucius used to say.
<br/><br/>
Mengzi attached exceptional importance to li. Another prominent representative of the Confucian school of that era, Xunzi, developed and elaborated on the doctrine of li as the basis of human relationships. In his view, the necessity of li's controlling function is explained by the fact that humans are inherently evil.
<br/><br/>
Mengzi approached this issue from a diametrically opposed position. He believed that every person is endowed with good qualities, and the generally accepted norms of human relationships are precisely a manifestation of this good and beneficial principle.
</p>
<h3>39.B. The Principle of Comparing the Comparable</h3>
<p class="original">
In this text, Mencius is addressed by his student Wu Luzi, stumped by the questions of a certain resident of the locality of Ren.
<br/><br/>
These questions are formulated in such a way that Wu Luzi would seem to be forced to admit that Confucian li is not the most important thing in a person's life. <br/><br/>
Mengzi emerges from this difficult situation with honor in his debate with his ideological opponent. He points out to Wu Luzi that his opponent is using a logically flawed method: comparing obviously incommensurable things, which results in an error in his overall conclusions.
</p>
<h3>39.B. "The Virgin Child"</h3>
<p class="original">
The word <span class="example">子 zǐ</span> originally meant "child" in ancient China, without specifying its gender.
<br/><br/>
Incidentally, this word was originally written with a character depicting a baby with swaddled feet, thus emphasizing the child's age, not gender.
<br/><br/>
In this lesson, the word <span class="example">子 zǐ</span> appears as "daughter." </p>
<div style="text-align: center; margin: 20px 0;">
<img alt="The " child"="" class="original" sign"="" src="./img/page_5_img_1.png" style="border: none; padding: 0; max-width: 100%;"/>
<p class="footer" style="margin-top: 8px; border-top: none; padding-top: 0;">The "Child" Sign</p>
</div>
</div>
<div class="assignment">
<h2>ASSIGNMENT FOR INDEPENDENT WORK</h2>
<ol>
<li>Rewrite the text, adding punctuation.</li>
<li>Perform a grammatical analysis of the text.</li>
<li>Translate the text into English.</li>
<li>List all the functional meanings of the word <span class="example">而 ér</span> and remember which of them you encountered in texts from the classical period.</li>
<li>Translate the following sentences into Old Chinese:<br/>
a) Who is more beautiful—me or Xugong?<br/>
b) When people talk about states with long traditions, they don't mean that they have old trees, but that their dignitaries hold their positions from generation to generation.<br/>
c) Is this question difficult to answer?<br/>
d) One basket of food, one cup of soup.
</li>
</ol>
</div>
<div class="footer">
Textbook: V. A. Kryukov — Archaic Old Chinese Language.<br/>
Reconstructed using OCR, preserving the author's style and adding pinyin.<br/>
All characters are from Lessons 1–39, or from cyclic characters (甲子 – 癸亥).
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggle = document.getElementById('fontToggle');
        const label = document.getElementById('toggleLabel');
        const styleSheet = document.getElementById('2change');

        const normalCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        const oracleCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Jiaguwen', 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        styleSheet.textContent = normalCSS;

        toggle.addEventListener('change', function () {
            if (toggle.checked) {
                styleSheet.textContent = oracleCSS;
                label.textContent = 'Оракульный вид';
            } else {
                styleSheet.textContent = normalCSS;
                label.textContent = 'Обычный вид';
            }
        });
    });
</script>
<script defer="True" src="../sender.js"></script></body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const table = document.getElementById('oracleTable');
        if (!table) return;

        const rows = table.querySelectorAll('tr');
        rows.forEach(row => {
            const cells = row.querySelectorAll('td');
            cells.forEach(cell => {
                // Получаем текстовое содержимое ячейки, включая скрытые элементы, и удаляем пробелы
                const cellText = cell.textContent.trim();
                
                // Проверяем, является ли содержимое ячейки только "_"
                if (cellText === '_') {
                    // Делаем текст невидимым, очищая textContent
                    // Это удалит текстовый узел "_" , но оставит другие элементы (например, подсказки)
                    cell.textContent = ''; 
                }
                // Проверяем, является ли содержимое ячейки только "|"
                else if (cellText === '|') {
                    // Меняем фоновый цвет на пастельно-бордовый
                    cell.style.backgroundColor = '#e0bfb8'; // Пример пастельно-бордового цвета
                    // Делаем текст (символ "|") невидимым, очищая textContent
                    cell.textContent = '';
                }
            });
        });
    });
</script>
<script id="help" src="../help.js"></script>
</html>
