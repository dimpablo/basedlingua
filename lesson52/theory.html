<!DOCTYPE html>

<html lang="ru">
<head>
<script src="./../dictionary.js">//dictionary.js содержит переменную charData используемую для подсказок таблицы! НЕ УДАЛЯТЬ! КРИТИЧЕСКИ ВАЖЕН!</script>
<meta charset="utf-8"/>
<title>Урок 52 — Древнекитайский язык по Крюкову</title>
<style>
        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            line-height: 1.8;
            margin: 50px auto;
            background-color: #fbf8f0;
            color: #2c3e50;
            max-width: 1000px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #1a4f72;
            font-weight: normal;
            letter-spacing: 0.5px;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
            border-bottom: 2px solid #1a4f72;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }
        h2 {
            text-align: center;
            font-size: 1.5em;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }
        h3 {
            font-size: 1.2em;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 30px;
        }
        .original {
            background-color: #f0f4f8;
            padding: 18px 20px;
            border-left: 6px solid #1a4f72;
            font-size: 1.08em;
            line-height: 1.6;
            border-radius: 0 8px 8px 0;
        }
        .text, .grammar, .lexicon, .assignment {
            margin-bottom: 45px;
        }
        .footer {
            font-size: 0.85em;
            color: #777;
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            line-height: 1.4;
        }
        .example {
            display: block;
            margin: 8px 0 8px 15px;
            font-family: "Courier New", monospace;
            font-size: 0.95em;
            color: #1a4f72;
        }
        ol {
            line-height: 1.8;
        }

        /* === Интерактивные подсказки для иероглифов === */
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .char-item {
            position: relative;
            display: inline-block;
            background: #f0f4f8;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.1em;
            text-align: center;
            transition: background-color 0.2s;
        }

        .char-item:hover {
            background: #e6f2ff;
        }

        .char-item > span {
            cursor: help;
        }

        .inline-pinyin {
            font-size: 0.85em;
            color: #555;
            margin-left: 4px;
            font-style: italic;
        }

        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 260px;
            background: #1a4f72;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-align: left;
            white-space: normal;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
            pointer-events: none;
        }

        .char-item:hover .char-tooltip {
            display: block;
        }
    </style>
<style>
        @font-face {
            font-family: 'Jiaguwen';
            src: url('../jiaguwen.ttf') format('truetype');
            font-style: normal;
            font-weight: normal;
            font-display: swap;
        }
    </style>
<style id="2change">
        .oracle-table {
            border-collapse: collapse;
            margin: 20px auto;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.3em;
            table-layout: fixed;
            width: 95%;
            max-width: 1200px;
        }
        .oracle-table td {
            padding: 6px 8px;
            border: 1px solid #d4d4d4;
            text-align: center;
            position: relative;
            word-break: keep-all;
            white-space: nowrap;
        }
        .line-num, .col-num {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            font-size: 0.85em;
            white-space: nowrap;
        }
    </style>
<style>
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #1a5fb4;
        }
        input:checked + .slider:before {
            transform: translateX(30px);
        }
    </style>
<style>
        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 300px;
            background: #1a4f72;
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 0.9em;
            text-align: left;
            white-space: normal;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
        }
        td:hover .char-tooltip {
            display: block;
        }
        .lesson-badge {
            display: inline-block;
            background: #e6f2ff;
            color: #1a4f72;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        /* Стили для правой фигурной скобки, объединяющей строки справа */
        .math-example {
            margin: 15px 0;
            display: flex;
            align-items: center;
            font-size: 0.95em;
        }
        .math-content {
            display: flex;
            flex-direction: column;
            text-align: left;
            margin-right: 12px; /* Отступ между текстом и скобкой */
        }
        .math-content .example {
            margin: 2px 0;
            white-space: pre; /* Сохраняем пробелы */
        }
        .math-brace {
            font-size: 2em; /* Большая скобка */
            line-height: 0.7;
            color: #1a4f72;
            font-family: monospace;
            font-weight: bold;
            margin: 0;
        }
        .math-caption {
            margin-left: 15px;
            font-style: italic;
            color: #1a4f72;
        }
        .image-container-inline {
            float: right;
            margin: 10px 0 10px 15px;
            text-align: center;
            max-width: 40%;
        }
        .lesson-image-inline {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .image-caption-inline {
            font-size: 0.85em;
            color: #555;
            margin-top: 5px;
            font-style: italic;
        }
        .clearfix::after {
            content: "";
            display: table;
            clear: both;
        }
        table.data-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 0.95em;
        }
        table.data-table th, table.data-table td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: left;
            vertical-align: top;
        }
        table.data-table th {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
        }
        table.data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
<h1>УРОК 52</h1>
<!-- ТАБЛИЦА ТЕКСТ УРОКА -->
<div class="text">
<h2>Lesson Text</h2>
<table class="oracle-table" id="oracleTable"></table>
</div>
<div style="text-align: center; margin: 20px 0;">
<label class="toggle-switch">
<input id="fontToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span id="toggleLabel" style="margin-left: 10px; font-family: 'Segoe UI', sans-serif; color: #333;">
        Обычный вид
    </span>
</div>
<script>
    const lessonText = [
        "我自不驅卿|妾有繡腰襦",
        "逼迫有阿母|葳蕤自生光",
        "卿但暫還家|紅羅複斗帳",
        "吾今且報府|四角垂香囊",
        "不久當歸還|箱簾六七十",
        "還必相迎取|緑碧青絲繩",
        "以此下心意|物物各自異",
        "慎勿違我語|種種在其中",
        "新婦謂府吏|人賜物亦鄙",
        "勿復重紛紜|不足迎後人",
        "往昔初陽歳|留待作遣施",
        "謝家來貴門|於今無會因",
        "奉事循公姥|時時為安慰",
        "進止敢自專|久久莫相忘",
        "晝夜勤作息|雞鳴外欲曙",
        "伶俜縈苦辛|新婦起嚴妝",
        "謂言無罪過|著我繡裌裙",
        "供養卒大恩|事事四五通",
        "仍更被驅遣|足下躡絲履",
        "何言復來還|頭上玳瑁光",
        "腰若流紈素|生小出野里",
        "耳著明月璫|本自無教訓",
        "指如削葱根|兼愧貴家子",
        "口如含珠丹|受母錢帛多",
        "纖纖作細步|不堪母驅使",
        "精妙世無雙|今日還家去",
        "上堂拜阿母|念母勞家裏",
        "阿母怒不止|却與小姑别",
        "昔作女兒時|涙落連珠子"
    ];

    // Функция для создания таблицы
    function createOracleTable() {
        const table = document.getElementById('oracleTable');
        // Создаём строку с номерами колонок
        const headerRow = document.createElement('tr');
        const emptyCell = document.createElement('td');
        emptyCell.className = 'line-num';
        headerRow.appendChild(emptyCell);
        for (let i = 1; i <= 11; i++) {
            const th = document.createElement('td');
            th.className = 'col-num';
            th.textContent = i;
            headerRow.appendChild(th);
        }
        table.appendChild(headerRow);

        // Создаём строки с текстом
        for (let i = 0; i < lessonText.length; i++) {
            const row = document.createElement('tr');
            const lineNumCell = document.createElement('td');
            lineNumCell.className = 'line-num';
            lineNumCell.textContent = i + 1;
            row.appendChild(lineNumCell);

            const chars = Array.from(lessonText[i].replace(/\s+/g, ' ')).filter(ch => ch.trim() !== '');
            for (let j = 0; j < 11; j++) {
                const td = document.createElement('td');
                if (j < chars.length) {
                    const char = chars[j];
                    td.textContent = char;
                    if (charData[char]) {
                        const tooltip = document.createElement('div');
                        tooltip.className = 'char-tooltip';
                        tooltip.innerHTML = `
                            <strong>${char}</strong> <em>${charData[char].pinyin}</em><br>
                            ${charData[char].meaning}<br>
                            <span class="lesson-badge">Урок ${charData[char].lesson}</span>
                        `;
                        td.appendChild(tooltip);
                    }
                }
                row.appendChild(td);
            }
            table.appendChild(row);
        }
    }

    // Инициализация таблицы при загрузке страницы
    document.addEventListener('DOMContentLoaded', createOracleTable);
</script>
<!-- КОНЕЦ ТАБЛИЦЫ ТЕКСТ УРОКА -->
<!-- ГРАММАТИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="grammar">
<h2>GRAMMAR COMMENTARY</h2>
<h3>52.1. Compound Predicatives
<p class="original">
The widespread use of compound predicatives, consisting

of two synonymous or similar components, is a distinctive feature of the post-classical period in the history of ancient Chinese. A characteristic feature of this type of predicative is the free permutation of the component morphemes. For example: 悲哀 bēi āi and 哀悲 āi bēi "to grieve": 飮酒則歡樂, 處喪則悲哀 yǐn jiǔ zé huān lè, chù sāng zé
bēi āi "When you drink wine, you rejoice; when you mourn, you grieve."
<br/>
<span class="example">心中哀悲而不能去 xīn zhōng āi bēi ér bù néng qù "The heart
is filled with sadness and cannot get rid of it."</span>
<br/>
A similar compound predicative is also noted in the text of lesson 52.
This is 歸還 guī huán — 還歸 huán guī "to return":
<br/>
<span class="example">不久當歸還 bù jiǔ dāng guī huán</span>
<br/>
<span class="example">不久當還歸 bù jiǔ dāng huán guī} "I'll be back soon."</span>
</p>
<h3>52.2. Passive Marker 被 bèi</h3>
<p class="original">
In classical Chinese, 被 bèi was a notional word meaning "to be subjected to," "to experience." It could
have a direct object:
<br/>
<span class="example">數被水旱之害 shù bèi shuǐ hàn zhī hài "to be repeatedly subjected to natural disasters such as floods
and droughts."</span>
<br/>
In post-classical Chinese, 被 bèi is transformed into a passive marker. As such, 被 bèi does not take an
object; After it, the predicative may be preceded by a word denoting the subject of the action:
<br/>
<span class="example">亮子被蘇峻害 liàng zǐ bèi sū jùn hài "Liang's son was killed
by Su Jun."</span>
<br/>
Sometimes—though extremely rarely—被 bèi still functions
as a predicative "to be subjected to." In the work "New Versions of Old Stories," the word 被 bèi is recorded 28 times as a passive marker and only twice as a notional predicative.
</p>
<h3>52.3. The function word yù (欲 yù)</h3>
<p class="original">
The function word yù (欲 yù), previously used as a notional word, becomes a future tense marker in the post-classical language. Its distinctive feature is that it is used primarily in impersonal sentences:
<br/>
<span class="example">外 欲 曙 wài yù shǔ "It's about to dawn outside."</span>
</p>
<h3>52.4. The function word dāng (當 dāng)</h3>
<p class="original">
The function word dāng (當 dāng) was encountered in the late classical language
as a modal predicative (44.4). Expressing the objective necessity of performing a particular action, dāng is also used in post-classical Chinese, typically in impersonal sentences:
<br/>
<span class="example">dāng shēng bō qí pí "He should be skinned alive!"</span>
<br/>
Dāng is also found in sentences that specify the subject of the action. Most often, it is expressed by a personal pronoun.
In this context, 當 dāng no longer denotes an obligation, but is an indicator of the future tense:
<br/>
<span class="example">我亦當往 wǒ yì dāng wǎng "I'll go too."</span>
<br/>
<span class="example">我今當一一嘗之,然後當取 wō j īn dāng yī yī cháng zhī,
rán hòu dāng qǔ "Now I'll try them one by one, and then
I'll take them."</span>
<br/>
Compare with the following sentence from our text:
<br/>
<span class="example">吾今且報府,不久當歸還 wú j īn qiě bào fǔ, bù jiǔ dāng
guī huán "I'm going to the office now, I'll be back soon."</span>
</p>
<h3>52.5. Nominal Suffixes</h3>
<p class="original">
The emergence of nominal suffixes is one of the most characteristic features of post-classical Old Chinese, although this process began in the classical period.
<br/><br/>
Among the nominal suffixes, the first to be used was, in all likelihood, 子 zǐ. Lesson 52 notes a name with this suffix (珠子 zhūzǐ).
<br/><br/>
Nominal suffixes become formal indicators of a word's membership in a class of nouns, regardless of grammatical context. A word formed with a suffix could not be used as a predicative.
<br/><br/>
This represents a qualitative shift, marking the beginning of the formation of the modern Chinese language. </p>
</h3></div>
<h2>СПИСОК СЛОВ УРОКА</h2>
<div class="char-list"></div>
<script>
    // Укажи номер урока здесь
    const LESSON = parseInt((window.location.pathname.match(/\/lesson(\d+)(?:\/|$)/) || [])[1] || '1');

    // Находим все иероглифы этого урока из charData
    const lessonChars = Object.entries(charData)
        .filter(([char, data]) => data.lesson === LESSON)
        .sort(([charA, dataA], [charB, dataB]) => {
            // Сортировка по пиньиню (опционально)
            return dataA.pinyin.localeCompare(dataB.pinyin, 'zh');
        });

    // Получаем контейнер
    const charList = document.querySelector('.char-list');

    // Очищаем (на всякий случай)
    charList.innerHTML = '';

    // Генерируем элементы
    lessonChars.forEach(([char, data]) => {
        const item = document.createElement('div');
        item.className = 'char-item';

        item.innerHTML = `
            <span>${char}<span class="inline-pinyin">${data.pinyin}</span></span>
            <div class="char-tooltip">${data.meaning}</div>
        `;

        charList.appendChild(item);
    });
</script>
<div class="lexicon">
<h2>LEXICAL COMMENTARY</h2>
<h3>52.A.初陽歳 chū yáng suì</h3>
<p class="original">
According to the ancient Chinese calendar, the year was divided into 24 periods (two in each lunar month). The period between 冬至 dōng zhì (the winter solstice, the middle of the 11th month) and 立春 lì
chūn ("beginning of spring", the second half of the first month) was called 初
陽歳 chū yáng suì.
</p>
<h3>52.B. Ladies' Toiletries</h3>
<p class="original">
A stone stele with an inscription was discovered in one of the tombs excavated in the area of ​​modern-day Changsha and dated to the 5th century. It listed the items placed in the tomb of a certain Fan. Among them, we find several mentioned in our text.
<br/><br/>
Clothing: blouse (襦 rú; our heroine's blouses had embroidered hemlines (繍腰襦 xiù yāo rú); skirt (裙 qún; the lesson text
refers to a lined skirt (裌裙 jiá qún).
<br/><br/>
Jewelry: earrings (璫 dāng), usually pearl (珠璫 zhū
dāng).
</p>
<h3>52.B. Screen and Canopy</h3>
<p class="original">
At night, screens were usually pulled up to the bed and covered with a special canopy. <br/><br/>
The canopy screen our heroine received as a dowry was made of red gauze; pouches containing aromatic substances hung from its edges.
</p>
</div>
<div class="assignment">
<h2>ASSIGNMENT FOR INDEPENDENT STUDY</h2>
<ol>
<li>Translate the text into English.</li>
<li>List all the ways of expressing the passive voice in Old Chinese.</li>
</ol>
</div>
<div class="footer">
Textbook: V. A. Kryukov — Postclassical Old Chinese.<br/>
Reconstructed using OCR, preserving the author's style and adding pinyin.<br/>
All characters are from Lessons 1–52, or from cyclic characters (甲子 – 癸亥).
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggle = document.getElementById('fontToggle');
        const label = document.getElementById('toggleLabel');
        const styleSheet = document.getElementById('2change');

        const normalCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        const oracleCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Jiaguwen', 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        styleSheet.textContent = normalCSS;

        toggle.addEventListener('change', function () {
            if (toggle.checked) {
                styleSheet.textContent = oracleCSS;
                label.textContent = 'Оракульный вид';
            } else {
                styleSheet.textContent = normalCSS;
                label.textContent = 'Обычный вид';
            }
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const table = document.getElementById('oracleTable');
        if (!table) return;

        const rows = table.querySelectorAll('tr');
        rows.forEach(row => {
            const cells = row.querySelectorAll('td');
            cells.forEach(cell => {
                // Получаем текстовое содержимое ячейки, включая скрытые элементы, и удаляем пробелы
                const cellText = cell.textContent.trim();
                
                // Проверяем, является ли содержимое ячейки только "_"
                if (cellText === '_') {
                    // Делаем текст невидимым, очищая textContent
                    // Это удалит текстовый узел "_" , но оставит другие элементы (например, подсказки)
                    cell.textContent = ''; 
                }
                // Проверяем, является ли содержимое ячейки только "|"
                else if (cellText === '|') {
                    // Меняем фоновый цвет на пастельно-бордовый
                    cell.style.backgroundColor = '#e0bfb8'; // Пример пастельно-бордового цвета
                    // Делаем текст (символ "|") невидимым, очищая textContent
                    cell.textContent = '';
                }
            });
        });
    });
</script>
<script id="help" src="../help.js"></script>
<script defer="True" src="../sender.js"></script></body>
</html>
