<!DOCTYPE html>

<html lang="ru">
<head>
<script src="./../dictionary.js">//dictionary.js содержит переменную charData используемую для подсказок таблицы! НЕ УДАЛЯТЬ! КРИТИЧЕСКИ ВАЖЕН!</script>
<meta charset="utf-8"/>
<title>Урок 47 — Древнекитайский язык по Крюкову</title>
<style>
        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            line-height: 1.8;
            margin: 50px auto;
            background-color: #fbf8f0;
            color: #2c3e50;
            max-width: 1000px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #1a4f72;
            font-weight: normal;
            letter-spacing: 0.5px;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
            border-bottom: 2px solid #1a4f72;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }
        h2 {
            text-align: center;
            font-size: 1.5em;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }
        h3 {
            font-size: 1.2em;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 30px;
        }
        .original {
            background-color: #f0f4f8;
            padding: 18px 20px;
            border-left: 6px solid #1a4f72;
            font-size: 1.08em;
            line-height: 1.6;
            border-radius: 0 8px 8px 0;
        }
        .text, .grammar, .lexicon, .assignment {
            margin-bottom: 45px;
        }
        .footer {
            font-size: 0.85em;
            color: #777;
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            line-height: 1.4;
        }
        .example {
            display: block;
            margin: 8px 0 8px 15px;
            font-family: "Courier New", monospace;
            font-size: 0.95em;
            color: #1a4f72;
        }
        ol {
            line-height: 1.8;
        }

        /* === Интерактивные подсказки для иероглифов === */
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .char-item {
            position: relative;
            display: inline-block;
            background: #f0f4f8;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.1em;
            text-align: center;
            transition: background-color 0.2s;
        }

        .char-item:hover {
            background: #e6f2ff;
        }

        .char-item > span {
            cursor: help;
        }

        .inline-pinyin {
            font-size: 0.85em;
            color: #555;
            margin-left: 4px;
            font-style: italic;
        }

        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 260px;
            background: #1a4f72;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-align: left;
            white-space: normal;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
            pointer-events: none;
        }

        .char-item:hover .char-tooltip {
            display: block;
        }
    </style>
<style>
        @font-face {
            font-family: 'Jiaguwen';
            src: url('../jiaguwen.ttf') format('truetype');
            font-style: normal;
            font-weight: normal;
            font-display: swap;
        }
    </style>
<style id="2change">
        .oracle-table {
            border-collapse: collapse;
            margin: 20px auto;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.3em;
            table-layout: fixed;
            width: 95%;
            max-width: 1200px;
        }
        .oracle-table td {
            padding: 6px 8px;
            border: 1px solid #d4d4d4;
            text-align: center;
            position: relative;
            word-break: keep-all;
            white-space: nowrap;
        }
        .line-num, .col-num {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            font-size: 0.85em;
            white-space: nowrap;
        }
    </style>
<style>
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #1a5fb4;
        }
        input:checked + .slider:before {
            transform: translateX(30px);
        }
    </style>
<style>
        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 300px;
            background: #1a4f72;
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 0.9em;
            text-align: left;
            white-space: normal;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
        }
        td:hover .char-tooltip {
            display: block;
        }
        .lesson-badge {
            display: inline-block;
            background: #e6f2ff;
            color: #1a4f72;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        /* Стили для правой фигурной скобки, объединяющей строки справа */
        .math-example {
            margin: 15px 0;
            display: flex;
            align-items: center;
            font-size: 0.95em;
        }
        .math-content {
            display: flex;
            flex-direction: column;
            text-align: left;
            margin-right: 12px; /* Отступ между текстом и скобкой */
        }
        .math-content .example {
            margin: 2px 0;
            white-space: pre; /* Сохраняем пробелы */
        }
        .math-brace {
            font-size: 2em; /* Большая скобка */
            line-height: 0.7;
            color: #1a4f72;
            font-family: monospace;
            font-weight: bold;
            margin: 0;
        }
        .math-caption {
            margin-left: 15px;
            font-style: italic;
            color: #1a4f72;
        }
        .image-container-inline {
            float: right;
            margin: 10px 0 10px 15px;
            text-align: center;
            max-width: 40%;
        }
        .lesson-image-inline {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .image-caption-inline {
            font-size: 0.85em;
            color: #555;
            margin-top: 5px;
            font-style: italic;
        }
        .clearfix::after {
            content: "";
            display: table;
            clear: both;
        }
        table.data-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 0.95em;
        }
        table.data-table th, table.data-table td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: left;
            vertical-align: top;
        }
        table.data-table th {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
        }
        table.data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
<h1>УРОК 47</h1>
<!-- ТАБЛИЦА ТЕКСТ УРОКА -->
<div class="text">
<h2>Lesson Text</h2>
<table class="oracle-table" id="oracleTable"></table>
</div>
<div style="text-align: center; margin: 20px 0;">
<label class="toggle-switch">
<input id="fontToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span id="toggleLabel" style="margin-left: 10px; font-family: 'Segoe UI', sans-serif; color: #333;">
    Обычный вид
  </span>
</div>
<style>
  .toggle-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 30px;
  }
  .toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 30px;
  }
  .slider:before {
    position: absolute;
    content: "";
    height: 22px;
    width: 22px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  input:checked + .slider {
    background-color: #1a5fb4;
  }
  input:checked + .slider:before {
    transform: translateX(30px);
  }
</style>
<style>/* Уменьшаем размер для номеров */

/* Tooltip — без изменений */
.char-tooltip {
    display: none;
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: max-content;
    max-width: 300px;
    background: #1a4f72;
    color: white;
    padding: 12px 15px;
    border-radius: 6px;
    font-size: 0.9em;
    text-align: left;
    white-space: normal;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
    line-height: 1.5;
}

td:hover .char-tooltip {
    display: block;
}

.lesson-badge {
    display: inline-block;
    background: #e6f2ff;
    color: #1a4f72;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.8em;
    margin-left: 5px;
}</style>
<script>
const lessonText = [
    "侯生笑曰臣固知公子之還也嬴聞晉",
    "鄙之兵符常在王卧内而如姬最幸出",
    "入王卧内力能竊之嬴聞如姬父爲人",
    "所殺如姬資之三年自王以下欲求報",
    "其父仇莫能得公子使客斬其仇頭敬",
    "進如姬如姬之欲爲公子死無所辭顧",
    "未有路耳公子從其計請如姬如姬果",
    "盗兵符與公子侯生曰將在外主令有",
    "所不受公子即合符而晉鄙不授公子",
    "兵而復請之事必危矣臣客屠者朱亥",
    "可與俱此人力士晉鄙聽大善不聽可",
    "使擊之於是公子泣侯生曰公子畏死",
    "邪何泣也公子曰晉鄙宿將恐不聽必",
    "當殺之是以泣耳豈畏死哉於是公子",
    "請朱亥朱亥曰臣乃市井鼓刀屠者而",
    "公子親數存之今公子有急此乃臣效",
    "命之秋也公子遂行至鄴矯魏王令代",
    "晉鄙晉鄙合符疑之欲無聽朱亥袖四",
    "十斤鐵椎椎殺晉鄙公子遂將晉鄙軍",
    "進兵擊秦軍秦軍解去遂救邯鄲存趙"
];
// Функция для создания таблицы
function createOracleTable() {
    const table = document.getElementById('oracleTable');
    
    // Создаём строку с номерами колонок
    const headerRow = document.createElement('tr');
    
    // Пустая ячейка для выравнивания с номерами строк
    const emptyCell = document.createElement('td');
    emptyCell.className = 'line-num';
    headerRow.appendChild(emptyCell);
    
    // Номера колонок: от 1 до 15
    for (let i = 1; i <= 15; i++) {
        const th = document.createElement('td');
        th.className = 'col-num';
        th.textContent = i;
        headerRow.appendChild(th);
    }
    table.appendChild(headerRow);
    
    // Создаём строки с текстом
    for (let i = 0; i < lessonText.length; i++) {
        const row = document.createElement('tr');
        
        // Номер строки
        const lineNumCell = document.createElement('td');
        lineNumCell.className = 'line-num';
        lineNumCell.textContent = i + 1;
        row.appendChild(lineNumCell);
        
        // Разбиваем строку на символы
        const chars = Array.from(lessonText[i]);
        
        // Заполняем ячейки для позиций 1–15
        for (let j = 0; j < 15; j++) {  // Ровно 15 ячеек
            const td = document.createElement('td');
            
            // Если есть символ на этой позиции — ставим его
            if (j < chars.length && chars[j].trim() !== '') {
                const char = chars[j];
                td.textContent = char;
                
                if (charData[char]) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'char-tooltip';
                    tooltip.innerHTML = `
                        <strong>${char}</strong> <em>${charData[char].pinyin}</em><br>
                        ${charData[char].meaning}<br>
                        <span class="lesson-badge">Урок ${charData[char].lesson}</span>
                    `;
                    td.appendChild(tooltip);
                }
            }
            // Если символа нет — ячейка остаётся пустой (ничего не делаем)
            row.appendChild(td);
        }
        
        table.appendChild(row);
    }
}

// Инициализация таблицы при загрузке страницы
document.addEventListener('DOMContentLoaded', createOracleTable);
</script>
<!-- КОНЕЦ ТАБЛИЦЫ ТЕКСТ УРОКА -->
<!-- ГРАММАТИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="grammar">
<h2>GRAMMAR COMMENTARY</h2>
<h3>47.1. Ways to Express the Passive Voice</h3>
<p class="original">
One way to express the passive voice, beginning in the early
classical period, was to use the preposition 於 yú (33.1).
Along with this, another method is widespread in the classical language: 
sob - construction 為...所 wéi... suǒ: 
<br/>
<span class="example">世子申生為麗姬所譖 shì zǐ shēn shēng wéi lì j ī suǒ zèn “The heir to the throne Shen-sheng was slandered by Li-ji.”</span>
<br/>
<span class="example">吾悔不用蒯通之計,乃為子女所詐 wú huǐ bù yòng 
kuǎi tōng zhī jì, nǎi wéi zǐ nǚ suǒ zhà "I regret that I did not take Kuai Tong's advice and was deceived by the children."</span>
<br/><br/>
This way of expressing the passive also occurs in two abbreviated forms: a) with the 所 suǒ omitted: <span class="example">身客死于秦,為天下笑 shēn kè sǐ yú qín, wéi tiān xià xiào "And he himself died in a foreign land in Qin and was ridiculed by the Celestial Empire";</span> b) with the 所 suǒ omitted and the subject of the action: <span class="example">父母宗族皆為戮歿 f ù mǔ zōng zú jiē wéi lù mò "Father, mother, and all blood relatives were killed."</span>
</p>
<h3>47.2. The Construction 自...以 zi... yǐ</h3>
<p class="original">
To indicate the direction of movement from a certain point, classical Chinese uses the construction
自...以 zì... yǐ "from... in the direction of...". This direction can
be indicated by spatial indicators ("up," "down," etc.), including the names of the cardinal directions.
<br/><br/>
We encountered the expression 自王以下 zì wáng yǐ xià, which can be translated as "everyone, starting from the king" (meaning that the king occupies the highest position, and the rest of the
people are below him).
</p>
<h3>47.3. The function word 即 jí (continuation)</h3>
<p class="original">
We've already encountered the word 即 jí as an indicator of sequence of actions (41.2).
<br/><br/>
In addition, it is used as a subordinating conjunction introducing the main clause in a complex sentence with a conditional clause. In this sense, 即 jí is synonymous with 則 zé: <span class="example">公徐行,即免死,急行,則及禍 gōng xú xíng, jí miǎn sǐ, jí xíng, zé jí huò "[If] you move slowly, you will avoid death, but if you hurry, you will get into trouble."</span>
<br/>
<span class="example">與之地,即無地以給之 yǔ zhī dì, jí wú dì yǐ gěi zhī "[If] it is a question of giving them land, then we
do not have enough land to satisfy their."</span>
<br/><br/>
即 jí can be used in complex sentences with a conditional clause and also to form a subordinate
clause. In this case, it is synonymous with 如 rú:
<br/>
<span class="example">子即反國,何以報寡人 zǐ jí fǎn guó, hé yǐ bào guǎ rén "If
you return to your kingdom, how will you thank me?"</span>
<br/>
<span class="example">若幸而男,吾奉之,即女也,吾徐死耳 ruò xìng ér nán,
wú f èng zhī, jí nǚ yě, wú xú sǐ ěr "If I'm lucky and a boy is born, I will accept him as a gift; and if it's a girl, then for me it will mean a slow death."</span>
</p>
<h3>47.4. Adverbs</h3>
<p class="original">
While only a very limited number of adverbs are found in archaic languages ​​(1.6), the development of the language throughout
subsequent times, right up to the late classical period, led to a sharp increase in their number. Among the new adverbs we encountered for the first time in this lesson, we note: <span class="example">固 gù "immediately", "from the very beginning": 季孫謀去中軍,豎牛曰夫子固欲去之 jì sūn móu qù
zhōng jūn, shù niú yuē fū zǐ gù yù qù zhī "Jisun planned to leave the army, and Shunyu said: 'Master, you wanted to leave it from the very
beginning'";</span>
<br/>
<span class="example">常 cháng "constantly", "all the time": 
常從王媼武負貰酒 cháng cóng wáng ǎo wǔ f ù shì jiǔ 
“He constantly bought wine on credit from Wang Ao and Wu Fu”;</span>
<br/>
<span class="example">果 guǒ “really”, “in fact” (cf. archaic 允 
yǔn): 
竇太后哭極哀不食,曰帝果殺吾子 dòu tài hòu kū 
jí āi wù shí, yuē dì guǒ shā wú zǐ “Empress Dou sobbed angrily, refused food, saying: “The Emperor really did kill my child!”;</span> <span class="example">顧 gù “only”, “merely”: 彼非不愛其弟顧有所不能忍者也 bǐ fēi bù ài qí dì gù yǒu suǒ bù néng rěn zhě yě “It’s not that he didn’t like his younger brother, it’s just that there was something in his brother’s behavior that he couldn’t stand”;</span> <span class="example">數 shù “repeatedly”, “many times”: 數問其家金余尚有幾所 shù wèn qí jiā j īn yú shàng yǒu
j ǐ suǒ "I asked my family many times how much money I had left";</span> <span class="example">親 qīn "personally": 親於其身為不善者君子不入也 qīn yú qí shēn wéi
bù shàn zhě jūn zǐ bù rù yě "A noble person should not associate with those who do evil to themselves."</span>
</p>
</div>
<h2>СПИСОК СЛОВ УРОКА</h2>
<div class="char-list"></div>
<script>
    // Укажи номер урока здесь
    const LESSON = parseInt((window.location.pathname.match(/\/lesson(\d+)(?:\/|$)/) || [])[1] || '1');

    // Находим все иероглифы этого урока из charData
    const lessonChars = Object.entries(charData)
        .filter(([char, data]) => data.lesson === LESSON)
        .sort(([charA, dataA], [charB, dataB]) => {
            // Сортировка по пиньиню (опционально)
            return dataA.pinyin.localeCompare(dataB.pinyin, 'zh');
        });

    // Получаем контейнер
    const charList = document.querySelector('.char-list');

    // Очищаем (на всякий случай)
    charList.innerHTML = '';

    // Генерируем элементы
    lessonChars.forEach(([char, data]) => {
        const item = document.createElement('div');
        item.className = 'char-item';

        item.innerHTML = `
            <span>${char}<span class="inline-pinyin">${data.pinyin}</span></span>
            <div class="char-tooltip">${data.meaning}</div>
        `;

        charList.appendChild(item);
    });
</script>

<div class="lexicon">
<h2>LEXICAL COMMENTARY</h2>
<h3>47.A. Tiger Mandate</h3>
<p class="original">
In ancient China, a military commander appointed to command an army received a mandate from the ruler—half of a tiger image.
If the ruler replaced the general, the newly appointed
commander presented the other half of the mandate, usually kept in the ruler's palace. The two halves were combined, and if they matched, the general
resigned. </p>
<div style="text-align: center; margin: 20px 0;">
<img alt="Tiger Mandate" class="original" src="./img/page_5_img_1.jpeg" style="border: none; padding: 0; max-width: 100%;"/>
<p class="footer" style="margin-top: 8px; border-top: none; padding-top: 0;">Tiger Mandate</p>
</div>
<div class="clearfix"></div>

</div>
<div class="assignment">
<h2>ASSIGNMENT FOR INDEPENDENT WORK</h2>
<ol>
<li>Rewrite the text, adding punctuation.</li>
<li>Perform a grammatical analysis of the text.</li>
<li>Translate the text into Russian.</li>
<li>List all Subordinating conjunctions with conditional meanings that you know.</li>
</ol>
</div>
<div class="footer">
Textbook: V. A. Kryukov - Late Classical Chinese.<br>
Recovered using OCR, preserving the author's style and adding pinyin.<br>
All characters are from Lessons 1–47, or from cyclic characters (甲子 – 癸亥).
</br></br></div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggle = document.getElementById('fontToggle');
        const label = document.getElementById('toggleLabel');
        const styleSheet = document.getElementById('2change');

        const normalCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        const oracleCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Jiaguwen', 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        styleSheet.textContent = normalCSS;

        toggle.addEventListener('change', function () {
            if (toggle.checked) {
                styleSheet.textContent = oracleCSS;
                label.textContent = 'Оракульный вид';
            } else {
                styleSheet.textContent = normalCSS;
                label.textContent = 'Обычный вид';
            }
        });
    });
</script>
<script id="help" src="../help.js"></script>
</body>
</html>
