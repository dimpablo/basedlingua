<!DOCTYPE html>

<html lang="ru">
<head>
<script src="./../dictionary.js">//dictionary.js содержит переменную charData используемую для подсказок таблицы</script>
<meta charset="utf-8"/>
<title>Урок 20 — Древнекитайский язык по Крюкову</title>
<style>
        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            line-height: 1.8;
            margin: 50px auto;
            background-color: #fbf8f0;
            color: #2c3e50;
            max-width: 1000px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #1a4f72;
            font-weight: normal;
            letter-spacing: 0.5px;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
            border-bottom: 2px solid #1a4f72;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }
        h2 {
            text-align: center;
            font-size: 1.5em;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }
        h3 {
            font-size: 1.2em;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 30px;
        }
        .original {
            background-color: #f0f4f8;
            padding: 18px 20px;
            border-left: 6px solid #1a4f72;
            font-size: 1.08em;
            line-height: 1.6;
            border-radius: 0 8px 8px 0;
        }
        .text, .grammar, .lexicon, .assignment {
            margin-bottom: 45px;
        }
        .footer {
            font-size: 0.85em;
            color: #777;
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            line-height: 1.4;
        }
        .example {
            display: block;
            margin: 8px 0 8px 15px;
            font-family: "Courier New", monospace;
            font-size: 0.95em;
            color: #1a4f72;
        }
        ol {
            line-height: 1.8;
        }

        /* === Интерактивные подсказки для иероглифов === */
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .char-item {
            position: relative;
            display: inline-block;
            background: #f0f4f8;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.1em;
            text-align: center;
            transition: background-color 0.2s;
        }

        .char-item:hover {
            background: #e6f2ff;
        }

        .char-item > span {
            cursor: help;
        }

        .inline-pinyin {
            font-size: 0.85em;
            color: #555;
            margin-left: 4px;
            font-style: italic;
        }

        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 260px;
            background: #1a4f72;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-align: left;
            white-space: normal;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
            pointer-events: none;
        }

        .char-item:hover .char-tooltip {
            display: block;
        }
    </style>
<style>
        @font-face {
            font-family: 'jinwen';
            src: url('../jinwen.ttf') format('truetype');
            font-style: normal;
            font-weight: normal;
            font-display: swap;
        }
    </style>
<style id="2change">
        .oracle-table {
            border-collapse: collapse;
            margin: 20px auto;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.3em;
            table-layout: fixed;
            width: 95%;
            max-width: 1200px;
        }
        .oracle-table td {
            padding: 6px 8px;
            border: 1px solid #d4d4d4;
            text-align: center;
            position: relative;
            word-break: keep-all;
            white-space: nowrap;
        }
        .line-num, .col-num {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            font-size: 0.85em;
            white-space: nowrap;
        }
    </style>
</head>
<body>
<h1>УРОК 20</h1>
<!-- ТАБЛИЦА ТЕКСТ УРОКА -->
<div class="text">
<h2>Lesson Text</h2>
<table class="oracle-table" id="oracleTable"></table>
</div>
<div style="text-align: center; margin: 20px 0;">
<label class="toggle-switch">
<input id="fontToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span id="toggleLabel" style="margin-left: 10px; font-family: 'Segoe UI', sans-serif; color: #333;">
        Обычный вид
    </span>
</div>
<style>
    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 30px;
    }
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 30px;
    }
    .slider:before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    input:checked + .slider {
        background-color: #1a5fb4;
    }
    input:checked + .slider:before {
        transform: translateX(30px);
    }
</style>
<style>
    .char-tooltip {
        display: none;
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        width: max-content;
        max-width: 300px;
        background: #1a4f72;
        color: white;
        padding: 12px 15px;
        border-radius: 6px;
        font-size: 0.9em;
        text-align: left;
        white-space: normal;
        z-index: 100;
        box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
        line-height: 1.5;
    }
    td:hover .char-tooltip {
        display: block;
    }
    .lesson-badge {
        display: inline-block;
        background: #e6f2ff;
        color: #1a4f72;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.8em;
        margin-left: 5px;
    }

    /* Стили для правой фигурной скобки, объединяющей строки справа */
    .math-example {
        margin: 15px 0;
        display: flex;
        align-items: center;
        font-size: 0.95em;
    }
    .math-content {
        display: flex;
        flex-direction: column;
        text-align: left;
        margin-right: 12px;
    }
    .math-content .example {
        margin: 2px 0;
        white-space: pre;
    }
    .math-brace {
        font-size: 2em;
        line-height: 0.7;
        color: #1a4f72;
        font-family: monospace;
        font-weight: bold;
        margin: 0;
    }
    .math-caption {
        margin-left: 15px;
        font-style: italic;
        color: #1a4f72;
    }
</style>
<script>
        const lessonText = [
            "周公拜手稽首曰予唯乙卯朝至于洛師",
            "我卜河朔黎水我乃卜澗水東瀍水",
            "西唯洛食我又卜瀍水東亦唯洛食王",
            "拜手稽首曰公不敢不敬天之休來相",
            "宅其作周匹休既定宅來視予卜休恒",
            "吉我二人共貞公其予以萬億年敬天",
            "之休周公曰王肇稱殷禮祀于新邑王",
            "若曰公明保予沖子公稱丕顯德以予",
            "小子揚文武烈"
        ];
    // Функция для создания таблицы
    function createOracleTable() {
        const table = document.getElementById('oracleTable');
        // Создаём строку с номерами колонок
        const headerRow = document.createElement('tr');
        const emptyCell = document.createElement('td');
        emptyCell.className = 'line-num';
        headerRow.appendChild(emptyCell);
        for (let i = 1; i <= 15; i++) {
            const th = document.createElement('td');
            th.className = 'col-num';
            th.textContent = i;
            headerRow.appendChild(th);
        }
        table.appendChild(headerRow);

        // Создаём строки с текстом
        for (let i = 0; i < lessonText.length; i++) {
            const row = document.createElement('tr');
            const lineNumCell = document.createElement('td');
            lineNumCell.className = 'line-num';
            lineNumCell.textContent = i + 1;
            row.appendChild(lineNumCell);

            const chars = Array.from(lessonText[i].replace(/\s+/g, ' ')).filter(ch => ch.trim() !== '');
            for (let j = 0; j < 15; j++) {
                const td = document.createElement('td');
                if (j < chars.length) {
                    const char = chars[j];
                    td.textContent = char;
                    if (charData[char]) {
                        const tooltip = document.createElement('div');
                        tooltip.className = 'char-tooltip';
                        tooltip.innerHTML = `
                            <strong>${char}</strong> <em>${charData[char].pinyin}</em><br>
                            ${charData[char].meaning}<br>
                            <span class="lesson-badge">Урок ${charData[char].lesson}</span>
                        `;
                        td.appendChild(tooltip);
                    }
                }
                row.appendChild(td);
            }
            table.appendChild(row);
        }
    }

    // Инициализация таблицы при загрузке страницы
    document.addEventListener('DOMContentLoaded', createOracleTable);
</script>
<!-- КОНЕЦ ТАБЛИЦЫ ТЕКСТ УРОКА -->
<!-- ГРАММАТИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="grammar">
<h2>GRAMMAR COMMENTARY</h2>
<h3>20.1. First-person personal pronoun 予 yú</h3>
<p class="original">
Based on its grammatical structure, the language of the written monuments of the Early Preclassical period (primarily the Shangshu) should generally be attributed to the same stage of development as the language of the Western Zhou bronze inscriptions. However, some function words, while essentially identical, are written differently in the inscriptions and written monuments.
<br/><br/>
For example, the Shangshu text contains the first-person pronoun 予 yú, which appears in inscriptions only in the Late Preclassical period.
</p>
<h3>20.2. Inversion of Objects</h3>
<p class="original">
Although new emphatic constructions appear in the Early Preclassical language, particularly the phrase with inverted predicate, the change in position of other parts of the sentence is subject to the same rules as in the archaic language.
<br/><br/>
As in the previous period, an object indicating time of action, usually placed before the subject, can be inverted without a preposition and stand in preposition to the predicate only when marked with the emphatic particle 唯 wéi.
<br/><br/>
Compare: <span class="example">旦王格廟 dàn wáng gé miào</span> "At sunrise, the ruler entered the temple."
<br/>
<span class="example">予唯乙卯朝至于洛師 yú wéi yǐ măo zhāo zhì yú luò shī</span> "I arrived at Luo's camp on the morning of Yi Mao Day."
<br/><br/>
An object denoting the direct or indirect object of an action is inverted, also when formed with an emphatic particle: <span class="example">唯洛食 wéi luò shí</span> "It was pointed out specifically to Luo."
</p>
<h3>20.3. Numeral Classes</h3>
<p class="original">
The Early Preclassical language uses the same numeral classes as the Archaic language, with the exception of the new class 億 yì. The exact meaning of this word remains unclear: in ancient times, it could mean either "one hundred thousand" or "one million." Later, this digit became synonymous with "one hundred million."
<br/><br/>
Remember that when a digit was omitted, the zero sign was omitted. It appeared in China very late, not earlier than the 12th century.
</p>
</div>
<h2>СПИСОК СЛОВ УРОКА</h2>
<div class="char-list"></div>
<script>
    // Укажи номер урока здесь
    const LESSON = parseInt((window.location.pathname.match(/\/lesson(\d+)(?:\/|$)/) || [])[1] || '1');

    // Находим все иероглифы этого урока из charData
    const lessonChars = Object.entries(charData)
        .filter(([char, data]) => data.lesson === LESSON)
        .sort(([charA, dataA], [charB, dataB]) => {
            // Сортировка по пиньиню (опционально)
            return dataA.pinyin.localeCompare(dataB.pinyin, 'zh');
        });

    // Получаем контейнер
    const charList = document.querySelector('.char-list');

    // Очищаем (на всякий случай)
    charList.innerHTML = '';

    // Генерируем элементы
    lessonChars.forEach(([char, data]) => {
        const item = document.createElement('div');
        item.className = 'char-item';

        item.innerHTML = `
            <span>${char}<span class="inline-pinyin">${data.pinyin}</span></span>
            <div class="char-tooltip">${data.meaning}</div>
        `;

        charList.appendChild(item);
    });
</script>
<h3>Словосочетания</h3>
<p class="original">
<span class="example">周公 zhōu gōng</span> «Чжоу-гун»<br/>
<span class="example">明辟 míng pì</span> «мудрый правитель»<br/>
<span class="example">黎水 lí shuǐ</span> «Лишуй» (название реки)<br/>
<span class="example">澗水 jiàn shuǐ</span> «Цзяньшуй» (название реки)<br/>
<span class="example">瀍水 chán shuǐ</span> «Чаньшуй» (название реки)<br/>
<span class="example">新邑 xīn yì</span> «Новый город»
</p>
<div class="lexicon">
<h2>LEXICAL COMMENTARY</h2>
<h3>20.A. New City</h3>
<p class="original">
Having defeated Yin and returning east, the Zhou people deemed it necessary to establish a stronghold in the west to control their newly acquired territories. A convenient location was chosen for the city on the northern bank of the Luo River, between its two tributaries, the Jianshui and Changshui. This city, founded in the early years of the reign of King Cheng, was called "New City" (新邑 xīn yì). It was sometimes also called "Chengzhou" (成周 chéng zhōu).
</p>
<h3>20.B. Zhou Emperor</h3>
<p class="original">
The conqueror of Yin, King Wu, died shortly after returning from the campaign against the Great City of Shang. His young son, who received the title of Cheng Wang, succeeded him. During this period, the young monarch was cared for by his uncle, his father's younger brother, Emperor Zhou. According to some sources, Emperor Zhou even officially occupied the throne for a time. The conquered Yin people took advantage of Wu Wang's death, winning over a number of high-ranking Zhou rulers. Emperor Zhou launched a second campaign to the east and decisively defeated the rebels. Upon returning to the capital, he transferred full power to Emperor Cheng Wang, remaining his advisor. In Confucian tradition, Emperor Zhou is portrayed as a sage who laid the foundations of Zhou morality and the most important state institutions.
</p>
<h3>20.V. Zhou Divination</h3>
<p class="original">
The Zhou adopted from the Yin the custom of divination using animal bones and deciphering the will of the supreme deity from the shape of the cracks. We don't know how the Zhou specifically performed this divination method, but the specialized terminology associated with this ritual differs somewhat from that of the Yin. In particular, the Yin did not use the word 食 shí, "to indicate the result of divination."
</p>
</div>
<!-- ЗАДАНИЕ ДЛЯ САМОСТОЯТЕЛЬНОЙ РАБОТЫ -->
<div class="assignment">
<h2>ASSIGNMENT FOR INDEPENDENT STUDY</h2>
<ol>
<li>Rewrite the text, adding punctuation marks.</li>
<li>Perform a grammatical analysis of the text.</li>
<li>Translate the text into English.</li>
<li>List all the function words that first appear in the Early Preclassical language and point out the features that distinguish it from Archaic Old Chinese.</li>
</ol>
</div>
<div class="footer">
Textbook: V. A. Kryukov - Archaic Old Chinese.<br/>
Pages: Early Preclassical Language 160, Lessons 20-161.<br/>
Reconstructed from the original text, preserving the author's style and structure.<br/>
All hieroglyphs and data are strictly from the source.
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggle = document.getElementById('fontToggle');
        const label = document.getElementById('toggleLabel');
        const styleSheet = document.getElementById('2change');

        const normalCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        const oracleCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'jinwen', 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        styleSheet.textContent = normalCSS;

        toggle.addEventListener('change', function () {
            if (toggle.checked) {
                styleSheet.textContent = oracleCSS;
                label.textContent = 'Bronze vessel view';
            } else {
                styleSheet.textContent = normalCSS;
                label.textContent = 'Usual view';
            }
        });
    });
</script>
<script defer="True" src="../sender.js"></script></body>
<script id="help" src="../help.js"></script>
</html>