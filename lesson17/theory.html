<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<title>Урок 17 — Древнекитайский язык по Крюкову</title>
<style>
        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            line-height: 1.8;
            margin: 50px auto;
            background-color: #fbf8f0;
            color: #2c3e50;
            max-width: 1000px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #1a4f72;
            font-weight: normal;
            letter-spacing: 0.5px;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
            border-bottom: 2px solid #1a4f72;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }
        h2 {
            text-align: center;
            font-size: 1.5em;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }
        h3 {
            font-size: 1.2em;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 30px;
        }
        .original {
            background-color: #f0f4f8;
            padding: 18px 20px;
            border-left: 6px solid #1a4f72;
            font-size: 1.08em;
            line-height: 1.6;
            border-radius: 0 8px 8px 0;
        }
        .text, .grammar, .lexicon, .assignment {
            margin-bottom: 45px;
        }
        .footer {
            font-size: 0.85em;
            color: #777;
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            line-height: 1.4;
        }
        .example {
            display: block;
            margin: 8px 0 8px 15px;
            font-family: "Courier New", monospace;
            font-size: 0.95em;
            color: #1a4f72;
        }
        ol {
            line-height: 1.8;
        }

        /* === Интерактивные подсказки для иероглифов === */
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .char-item {
            position: relative;
            display: inline-block;
            background: #f0f4f8;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.1em;
            text-align: center;
            transition: background-color 0.2s;
        }

        .char-item:hover {
            background: #e6f2ff;
        }

        .char-item > span {
            cursor: help;
        }

        .inline-pinyin {
            font-size: 0.85em;
            color: #555;
            margin-left: 4px;
            font-style: italic;
        }

        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 260px;
            background: #1a4f72;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-align: left;
            white-space: normal;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
            pointer-events: none;
        }

        .char-item:hover .char-tooltip {
            display: block;
        }
    </style>
<style>
        @font-face {
            font-family: 'Jiaguwen';
            src: url('../jiaguwen.ttf') format('truetype');
            font-style: normal;
            font-weight: normal;
            font-display: swap;
        }
    </style>
<style id="2change">
        .oracle-table {
            border-collapse: collapse;
            margin: 20px auto;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.3em;
            table-layout: fixed;
            width: 95%;
            max-width: 1200px;
        }
        .oracle-table td {
            padding: 6px 8px;
            border: 1px solid #d4d4d4;
            text-align: center;
            position: relative;
            word-break: keep-all;
            white-space: nowrap;
        }
        .line-num, .col-num {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            font-size: 0.85em;
            white-space: nowrap;
        }
    </style>
<script src="./../dictionary.js"></script>
</head>
<body>
<h1>УРОК 17</h1>
<!-- ТАБЛИЦА ТЕКСТ УРОКА -->
<div class="text">
<h2>Lesson Text</h2>
<table class="oracle-table" id="oracleTable"></table>
</div>
<div style="text-align: center; margin: 20px 0;">
<label class="toggle-switch">
<input id="fontToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span id="toggleLabel" style="margin-left: 10px; font-family: 'Segoe UI', sans-serif; color: #333;">
        Обычный вид
    </span>
</div>
<style>
    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 30px;
    }
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 30px;
    }
    .slider:before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    input:checked + .slider {
        background-color: #1a5fb4;
    }
    input:checked + .slider:before {
        transform: translateX(30px);
    }
</style>
<style>
    .char-tooltip {
        display: none;
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        width: max-content;
        max-width: 300px;
        background: #1a4f72;
        color: white;
        padding: 12px 15px;
        border-radius: 6px;
        font-size: 0.9em;
        text-align: left;
        white-space: normal;
        z-index: 100;
        box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
        line-height: 1.5;
    }
    td:hover .char-tooltip {
        display: block;
    }
    .lesson-badge {
        display: inline-block;
        background: #e6f2ff;
        color: #1a4f72;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.8em;
        margin-left: 5px;
    }

    /* Стили для правой фигурной скобки, объединяющей строки справа */
    .math-example {
        margin: 15px 0;
        display: flex;
        align-items: center;
        font-size: 0.95em;
    }
    .math-content {
        display: flex;
        flex-direction: column;
        text-align: left;
        margin-right: 12px; /* Отступ между текстом и скобкой */
    }
    .math-content .example {
        margin: 2px 0;
        white-space: pre; /* Сохраняем пробелы */
    }
    .math-brace {
        font-size: 2em; /* Большая скобка */
        line-height: 0.7;
        color: #1a4f72;
        font-family: monospace;
        font-weight: bold;
        margin: 0;
    }
    .math-caption {
        margin-left: 15px;
        font-style: italic;
        color: #1a4f72;
    }
</style>
<script>
    // Данные текста урока 17 (по вашему идеальному формату)
    const lessonText = [
        "唯九月王在宗周令盂王若曰盂丕顯",
        "文王受天佑大命在武王嗣文作邦辟",
        "厥慝敷佑四方畯政厥民抯酒無敢酣",
        "有祡烝祀無敢擾故天翼臨子法保先",
        "王有四方我聞殷墜命唯殷邊侯甸眔",
        "殷正辟率肆于酒故喪純祀王曰令汝",
        "盂型乃嗣祖南公賜汝鬯一卣冕衣芾",
        "舄車馬賜乃祖南公旂用狩勿廢朕令",
        "盂用對王休用作祖南公寳鼎"
    ];

    // Функция для создания таблицы
    function createOracleTable() {
        const table = document.getElementById('oracleTable');
        // Создаём строку с номерами колонок
        const headerRow = document.createElement('tr');
        const emptyCell = document.createElement('td');
        emptyCell.className = 'line-num';
        headerRow.appendChild(emptyCell);
        for (let i = 1; i <= 15; i++) {
            const th = document.createElement('td');
            th.className = 'col-num';
            th.textContent = i;
            headerRow.appendChild(th);
        }
        table.appendChild(headerRow);

        // Создаём строки с текстом
        for (let i = 0; i < lessonText.length; i++) {
            const row = document.createElement('tr');
            const lineNumCell = document.createElement('td');
            lineNumCell.className = 'line-num';
            lineNumCell.textContent = i + 1;
            row.appendChild(lineNumCell);

            const chars = Array.from(lessonText[i].replace(/\s+/g, ' ')).filter(ch => ch.trim() !== '');
            for (let j = 0; j < 15; j++) {
                const td = document.createElement('td');
                if (j < chars.length) {
                    const char = chars[j];
                    td.textContent = char;
                    if (charData[char]) {
                        const tooltip = document.createElement('div');
                        tooltip.className = 'char-tooltip';
                        tooltip.innerHTML = `
                            <strong>${char}</strong> <em>${charData[char].pinyin}</em><br>
                            ${charData[char].meaning}<br>
                            <span class="lesson-badge">Урок ${charData[char].lesson}</span>
                        `;
                        td.appendChild(tooltip);
                    }
                }
                row.appendChild(td);
            }
            table.appendChild(row);
        }
    }

    // Инициализация таблицы при загрузке страницы
    document.addEventListener('DOMContentLoaded', createOracleTable);
</script>
<!-- КОНЕЦ ТАБЛИЦЫ ТЕКСТ УРОКА -->
<!-- ГРАММАТИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="grammar">
<h2>GRAMMAR COMMENTARY</h2>
<h3>17.1. The Definitive Pronouns 無 wú and 亡 wú</h3>
<p class="original">
We have already encountered the words 無 wú and 亡 wú as negative predicatives (see 14.4). In the Early Preclassical language, they could also serve as definitive pronouns. Positioned after the subject, such a pronoun indicates that none of the objects or persons expressed by the subject performs the actions indicated by the predicate: <span class="example">文王孫亡克兢厥烈 wén wáng sūn wú kè jìng jué liè</span> "None of the descendants of King Wen could rival his exploits."
<br/><br/>
When the subject is known, the subject can be omitted: <span class="example">無敢酣 wú gǎn hān</span> "No one dared to get drunk."
<br/><br/>
The pronouns 無 wú and 亡 wú can also be used in a negative sentence: <span class="example">文王孫亡弗帥型 wén wáng sūn wú fú shuài xíng</span> "Among the descendants of King Wen, there was no one who did not follow the example of their ancestors."
<br/><br/>
In the latter case, after the definitive pronoun 無 wú or 亡 wú, the function word 咸 xián or 率 shuài may appear immediately before the predicate: <span class="example">父身三年靜東國，亡不咸斁天威 fù shēn sān nián jìng dōng guó, wú bù xián yì tiān wēi</span> "Father pacified the eastern countries for three years, and there was not a single one among them that did not submit to the will of Heaven" (or: "... they all submitted").
</p>
<h3>17.2. Causal conjunction 故 gù</h3>
<p class="original">
The word 故 gù is used in pre-classical languages ​​with the notional meaning "cause." It can also function as a conjunction indicating a cause-and-effect relationship between a subordinate clause and the main clause (equivalent to the English "therefore," "for this reason").
<br/><br/>
The conjunction 故 gù introduces the main clause, so it can serve as a guide for dividing the text—determining the end of a subordinate clause: <span class="example">殷正百辟率肆于酒, 故喪純祀 yīn zhèng bǎi pì shuài sì yú jiǔ, gù sāng chún sì</span> "All the Yin officials and local rulers became mired in drunkenness, so they lost the right to perform sacred sacrifices."
<br/><br/>
<span class="example">腥味在上, 故天降喪于殷 xīng wèi zài shàng, gù tiān jiàng sāng yú yīn</span> "The foul odor spread upward, and so Heaven sent down destruction upon Yin."
</p>
</div>
<h2>СПИСОК СЛОВ УРОКА</h2>
<div class="char-list"></div>
<script>
    // Укажи номер урока здесь
    const LESSON = parseInt((window.location.pathname.match(/\/lesson(\d+)(?:\/|$)/) || [])[1] || '1');

    // Находим все иероглифы этого урока из charData
    const lessonChars = Object.entries(charData)
        .filter(([char, data]) => data.lesson === LESSON)
        .sort(([charA, dataA], [charB, dataB]) => {
            // Сортировка по пиньиню (опционально)
            return dataA.pinyin.localeCompare(dataB.pinyin, 'zh');
        });

    // Получаем контейнер
    const charList = document.querySelector('.char-list');

    // Очищаем (на всякий случай)
    charList.innerHTML = '';

    // Генерируем элементы
    lessonChars.forEach(([char, data]) => {
        const item = document.createElement('div');
        item.className = 'char-item';

        item.innerHTML = `
            <span>${char}<span class="inline-pinyin">${data.pinyin}</span></span>
            <div class="char-tooltip">${data.meaning}</div>
        `;

        charList.appendChild(item);
    });
</script>
<!-- ЛЕКСИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="lexicon">
<h2>LEXICAL COMMENTARY</h2>
<h3>17.A. The Mandate of Heaven</h3>
<p class="original">
The cornerstone of the socio-political views that prevailed during the Zhou era was the idea of ​​the divine origin of the supreme ruler's power.
<br/><br/>
The rise of the Zhou tribe, which overthrew the Yin king and took his place, was explained and justified by the concept of a "command," "order," or "mandate," supposedly bestowed upon the Zhou leader by Heaven. The Yin ruler, who had previously enjoyed this mandate, proved unworthy of it. Therefore, Heaven chose a new deputy, an earthly ruler. <br/><br/>
<em>What explains this change in Heaven's will?</em>
<br/><br/>
The rationale for this point of the "Mandate of Heaven" concept was paramount in justifying the Zhou conquest, which could otherwise be viewed as an act of violence and blasphemy. This rationale, advanced by the Zhou, rests on moral and ethical categories.
<br/><br/>
The State of Yin had once been the chosen one of Heaven, but the last Yin kings were immoral, and Heaven turned against them.
<br/><br/>
In contrast, the ruler of Zhou, who received the Mandate of Heaven and the order to carry out Heaven's will, possessed all the virtues necessary for a ruler of the Celestial Empire. <br/><br/>
Here is how King Wen's victory in "Shijing" is explained:
<br/><br/>
<blockquote style="margin: 15px 0; padding: 12px 20px; background: #f0f4f8; border-left: 4px solid #1a4f72; font-style: italic; line-height: 1.6;">
This King Wen is our Enlightened King, and he<br/>
He was attentive and full of care in his heart.<br/>
He served the Supreme Lord of Heaven with glory,<br/>
He received many blessings and bounties from Heaven.<br/>
He is virtuous and virtuous beyond reproach!<br/>
He ascended to the throne of the world, and with him his family.
</blockquote>
</p>
<h3>17.B. "Immersed in Drunkenness"</h3>
<p class="original">
One of the many accusations leveled post-factum by the Zhou people against the last Yin king, Di Xin, was that he indulged in unbridled extravagance, and that in his palace "animal carcasses piled up like a forest, and wine flowed like a river."
<br/><br/>
Perhaps the underlying reason for Di Xin's condemnation was quite prosaic. As is well known, the Zhou people were inferior to the Yin in terms of socioeconomic development. Yin agriculture, in particular, was much more advanced, so the Zhou people simply could not afford the luxury of using large quantities of grain to make wine (<em>wine in ancient China was made from various varieties of millet</em>).
</p>
<h3>17.B. "Your Grandfather's Standard"
<p class="original">
During the Zhou Dynasty, a standard (<code style="background: #e6f2ff; color: #1a4f72; padding: 2px 5px; border-radius: 3px; font-size: 0.9em;">旂 qí</code>) was a distinctive mark of an aristocrat that indicated his location during battle. Such a standard was also used for hunting. It was a piece of cloth depicting a sacred animal. It was attached to a wooden handle and was equipped with metal bells.
<br/><br/>
At first glance, it may not be entirely clear why the king would give Yu his grandfather's standard. Other inscriptions contain even stranger references to the ruler giving his subordinates... the loincloths of their ancestors.
<br/><br/>
This is explained by the fact that during the Zhou period, clothing, weapons, chariots, standards, etc., served as indicators of a member's social status. The color and cut of clothing could be used to accurately determine a person's social status.
<br/><br/>
Therefore, by gifting an aristocrat with clothing or weapons of the type corresponding to a certain social rank, the ruler officially recognized their rights.
<br/><br/>
If we consider that the son occupied the same position in society as his father (and therefore his grandfather), it becomes clear that the granting of his grandfather's standard to Yu meant:
<br/>
<ol style="margin: 15px 0 15px 30px; line-height: 1.6;">
<li>confirmation of his <strong>hereditary status</strong>;</li>
<li>recognition of his <strong>right to symbols of power</strong>;</li>
<li>symbolic <strong>restoration of the continuity</strong> of the family.</li>
</ol>
</p>
</h3></div>
<!-- ЗАДАНИЕ ДЛЯ САМОСТОЯТЕЛЬНОЙ РАБОТЫ -->
<div class="assignment">
<h2>ASSIGNMENT FOR INDEPENDENT WORK</h2>
<ol>
<li>Rewrite the text and add punctuation marks.</li>
<li>Perform grammatical analysis text.</li>
<li>Translate the text into English.</li>
<li>Translate the following sentences into Old Chinese:
<ol type="1">
<li>None of my children will be able to found a state.</li>
<li>Among these people, there was not a single one who did not return from the campaign.</li>
<li>All his subjects dared to enter the great temple.</li>
</ol>
</li>
</ol>
</div>
<div class="footer">
Textbook: V. A. Kryukov — Archaic Old Chinese.<br/>
Restored using OCR, preserving the author's style and adding pinyin.<br/>
All characters are from the texts of Lessons 1–17, or from cyclic characters (甲子 – 癸亥).
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggle = document.getElementById('fontToggle');
        const label = document.getElementById('toggleLabel');
        const styleSheet = document.getElementById('2change');

        const normalCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        const oracleCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Jiaguwen', 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        styleSheet.textContent = normalCSS;

        toggle.addEventListener('change', function () {
            if (toggle.checked) {
                styleSheet.textContent = oracleCSS;
                label.textContent = 'Оракульный вид';
            } else {
                styleSheet.textContent = normalCSS;
                label.textContent = 'Обычный вид';
            }
        });
    });
</script>
<script id="help" src="../help.js"></script>
<script defer="True" src="../sender.js"></script></body>
</html>