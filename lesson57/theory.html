<!DOCTYPE html>

<html lang="ru">
<head>
<script src="./../dictionary.js">//dictionary.js содержит переменную charData используемую для подсказок таблицы! НЕ УДАЛЯТЬ! КРИТИЧЕСКИ ВАЖЕН!</script>
<meta charset="utf-8"/>
<title>Урок 57 — Древнекитайский язык по Крюкову</title>
<style>
        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            line-height: 1.8;
            margin: 50px auto;
            background-color: #fbf8f0;
            color: #2c3e50;
            max-width: 1000px;
            padding: 0 20px;
        }
        h1, h2, h3 {
            color: #1a4f72;
            font-weight: normal;
            letter-spacing: 0.5px;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
            border-bottom: 2px solid #1a4f72;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }
        h2 {
            text-align: center;
            font-size: 1.5em;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin: 40px 0 20px;
        }
        h3 {
            font-size: 1.2em;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 30px;
        }
        .original {
            background-color: #f0f4f8;
            padding: 18px 20px;
            border-left: 6px solid #1a4f72;
            font-size: 1.08em;
            line-height: 1.6;
            border-radius: 0 8px 8px 0;
        }
        .text, .grammar, .lexicon, .assignment {
            margin-bottom: 45px;
        }
        .footer {
            font-size: 0.85em;
            color: #777;
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            line-height: 1.4;
        }
        .example {
            display: block;
            margin: 8px 0 8px 15px;
            font-family: "Courier New", monospace;
            font-size: 0.95em;
            color: #1a4f72;
        }
        ol {
            line-height: 1.8;
        }

        /* === Интерактивные подсказки для иероглифов === */
        .char-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .char-item {
            position: relative;
            display: inline-block;
            background: #f0f4f8;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.1em;
            text-align: center;
            transition: background-color 0.2s;
        }

        .char-item:hover {
            background: #e6f2ff;
        }

        .char-item > span {
            cursor: help;
        }

        .inline-pinyin {
            font-size: 0.85em;
            color: #555;
            margin-left: 4px;
            font-style: italic;
        }

        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 260px;
            background: #1a4f72;
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-align: left;
            white-space: normal;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
            pointer-events: none;
        }

        .char-item:hover .char-tooltip {
            display: block;
        }
    </style>
<style>
        @font-face {
            font-family: 'Jiaguwen';
            src: url('../jiaguwen.ttf') format('truetype');
            font-style: normal;
            font-weight: normal;
            font-display: swap;
        }
    </style>
<style id="2change">
        .oracle-table {
            border-collapse: collapse;
            margin: 20px auto;
            font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
            font-size: 1.3em;
            table-layout: fixed;
            width: 95%;
            max-width: 1200px;
        }
        .oracle-table td {
            padding: 6px 8px;
            border: 1px solid #d4d4d4;
            text-align: center;
            position: relative;
            word-break: keep-all;
            white-space: nowrap;
        }
        .line-num, .col-num {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            font-size: 0.85em;
            white-space: nowrap;
        }
    </style>
<style>
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #1a5fb4;
        }
        input:checked + .slider:before {
            transform: translateX(30px);
        }
    </style>
<style>
        .char-tooltip {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: max-content;
            max-width: 300px;
            background: #1a4f72;
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 0.9em;
            text-align: left;
            white-space: normal;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(26, 79, 114, 0.3);
            line-height: 1.5;
        }
        td:hover .char-tooltip {
            display: block;
        }
        .lesson-badge {
            display: inline-block;
            background: #e6f2ff;
            color: #1a4f72;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        /* Стили для правой фигурной скобки, объединяющей строки справа */
        .math-example {
            margin: 15px 0;
            display: flex;
            align-items: center;
            font-size: 0.95em;
        }
        .math-content {
            display: flex;
            flex-direction: column;
            text-align: left;
            margin-right: 12px; /* Отступ между текстом и скобкой */
        }
        .math-content .example {
            margin: 2px 0;
            white-space: pre; /* Сохраняем пробелы */
        }
        .math-brace {
            font-size: 2em; /* Большая скобка */
            line-height: 0.7;
            color: #1a4f72;
            font-family: monospace;
            font-weight: bold;
            margin: 0;
        }
        .math-caption {
            margin-left: 15px;
            font-style: italic;
            color: #1a4f72;
        }
        .image-container-inline {
            float: right;
            margin: 10px 0 10px 15px;
            text-align: center;
            max-width: 40%;
        }
        .lesson-image-inline {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .image-caption-inline {
            font-size: 0.85em;
            color: #555;
            margin-top: 5px;
            font-style: italic;
        }
        .clearfix::after {
            content: "";
            display: table;
            clear: both;
        }
        table.data-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 0.95em;
        }
        table.data-table th, table.data-table td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: left;
            vertical-align: top;
        }
        table.data-table th {
            background-color: #f0f4f8;
            color: #1a4f72;
            font-weight: bold;
        }
        table.data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
<h1>УРОК 57</h1>
<!-- ТАБЛИЦА ТЕКСТ УРОКА -->
<div class="text">
<h2>Lesson Text</h2>
<table class="oracle-table" id="oracleTable"></table>
</div>
<div style="text-align: center; margin: 20px 0;">
<label class="toggle-switch">
<input id="fontToggle" type="checkbox"/>
<span class="slider"></span>
</label>
<span id="toggleLabel" style="margin-left: 10px; font-family: 'Segoe UI', sans-serif; color: #333;">
    Обычный вид
  </span>
</div>
<script>
const lessonText = [
    "南陽宋定伯年少時夜行逢鬼問之鬼",
    "言我是鬼鬼問汝復誰定伯誑之言我",
    "亦鬼鬼問欲至何所答曰欲至宛市鬼",
    "言我亦欲至宛市遂行數里鬼言步行",
    "太遲可共遞相擔何如定伯曰大善鬼",
    "便先擔定伯數里鬼言卿太重將非鬼",
    "也定伯言我新鬼故身重耳定伯因復",
    "擔鬼鬼略無重如是再三定伯復言我",
    "新鬼不知有何所畏忌鬼答言唯不喜",
    "人唾於是共行道遇水定伯令鬼先渡",
    "聽之了然無聲音定伯自渡漕漼作聲",
    "鬼復言何以有聲定伯曰新死不習渡",
    "水故耳勿怪吾也行欲至宛市定伯便",
    "擔鬼著肩上急執行鬼大呼聲咋咋然",
    "不復聽之徑至宛市中下著地化為一",
    "羊便賣之恐其變化唾之得錢千五百",
    "乃去當時石崇有言定伯賣鬼得錢千",
    "五百文"
];

// Функция для создания таблицы
function createOracleTable() {
    const table = document.getElementById('oracleTable');
    
    // Создаём строку с номерами колонок
    const headerRow = document.createElement('tr');
    
    // Пустая ячейка для выравнивания с номерами строк
    const emptyCell = document.createElement('td');
    emptyCell.className = 'line-num';
    headerRow.appendChild(emptyCell);
    
    // Номера колонок: от 1 до 15
    for (let i = 1; i <= 15; i++) {
        const th = document.createElement('td');
        th.className = 'col-num';
        th.textContent = i;
        headerRow.appendChild(th);
    }
    table.appendChild(headerRow);
    
    // Создаём строки с текстом
    for (let i = 0; i < lessonText.length; i++) {
        const row = document.createElement('tr');
        
        // Номер строки
        const lineNumCell = document.createElement('td');
        lineNumCell.className = 'line-num';
        lineNumCell.textContent = i + 1;
        row.appendChild(lineNumCell);
        
        // Разбиваем строку на символы
        const chars = Array.from(lessonText[i]);
        
        // Заполняем ячейки для позиций 1–15
        for (let j = 0; j < 15; j++) {
            const td = document.createElement('td');
            
            if (j < chars.length && chars[j].trim() !== '') {
                const char = chars[j];
                td.textContent = char;
                
                if (charData[char]) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'char-tooltip';
                    tooltip.innerHTML = `
                        <strong>${char}</strong> <em>${charData[char].pinyin}</em><br>
                        ${charData[char].meaning}<br>
                        <span class="lesson-badge">Урок ${charData[char].lesson}</span>
                    `;
                    td.appendChild(tooltip);
                }
            }
            row.appendChild(td);
        }
        
        table.appendChild(row);
    }
}

// Инициализация таблицы при загрузке страницы
document.addEventListener('DOMContentLoaded', createOracleTable);
</script>
<!-- КОНЕЦ ТАБЛИЦЫ ТЕКСТ УРОКА -->
<!-- ГРАММАТИЧЕСКИЙ КОММЕНТАРИЙ -->
<div class="grammar">
<h2>GRAMMAR COMMENTARY</h2>
<h3>57.1. The shì (continued)</h3>
<p class="original">
The story told in this lesson is known in at least two manuscripts. The first is a collection of parables
"Stories of the Extraordinary," likely compiled by the famous statesman and writer of the Three Kingdoms period, Cao Pei (186–226). The second is the excerpt cited in the lesson
from "Records of Spiritual Searches," compiled in the 4th century.
<br/><br/>
Interestingly, the same plot is told in these two versions using language that reveals some grammatical differences. These differences concern, in particular, the ways of expressing the relationship
between the subject and the predicate.
<br/><br/>
Cao Pei's version uses the old lyric as a connective tissue.
也 yě: 夜行逢鬼,問曰誰,鬼曰鬼也 yè xíng f éng guǐ, wèn
yuē shuí, guǐ yuē guǐ yě "[Song Dingbo] was walking one night and met the soul of a deceased person. He asked it: "Who are you?" The soul
answered: "[I am] the soul of the deceased."
<br/><br/>
In the second, later version, the copula in a similar
sentence is not 也 yě, but 是 shì: 夜行逢鬼,問之,鬼言我是鬼 yè xíng f éng guǐ, wèn zhī, guǐ yán wǒ shì guǐ "[Song Dingbo] was walking one night and met the soul of the deceased. He asked it ["Who are you?"]. The soul replied: "I am the soul of the deceased."
<br/><br/>
At the same time, in some other sentences in our text, the link is completely absent: 我新鬼, 故身重耳 wǒ xīn guǐ, gù shēn zhòng ěr "I am the soul of the recently deceased, so my body is heavy, that's all!"
</p>
<h3>57.2. Function word 復 fù</h3>
<p class="original">
The primary meaning of the function word 復 fù is "again," "again,"
"also"; When combined with negation, it translates as "no longer...":
<br/>
<span class="example">不復聽之 bù fù tīng zhī "I didn't listen to him anymore."</span>
<br/><br/>
The second meaning of 復 fù brings it closer to 則 zé (when the latter occupies a position between the subject and the predicate, expressing some kind of opposition or logical turn of thought):
<br/>
<span class="example">逢鬼,問之,鬼言我是鬼,鬼問汝復誰 f éng guǐ, wèn zhī, guǐ yán wǒ shì guǐ, guǐ wèn rǔ fù shuí "Met the soul of the deceased. He asked it [“Who are you?”]. The soul answered: “I am the soul of the deceased.” [Then] the soul asked: “And who are you?”


<h3>57.3. The functional word 將 jīang</h3>
<p class="original">
In the post-classical period, the functional word 將 jīang acquired some new meanings.
<br/><br/>
This word, in particular, can convey the speaker's uncertainty about the veracity of their statement and can be translated into
English by the words "probably" or "perhaps":
<br/>
<span class="example">卿太重,將非鬼也 qīng tài zhòng, jiāng fēi guǐ yě "You
are too heavy, you are probably not the soul of the deceased."</span>
</p>
<h3>57.4. Indicator of Redundant Degree of Quality</h3>
<p class="original">
In addition to the superlative degree of quality, in post-classical times, its redundant degree could also be expressed. For this, as in modern Chinese, the adverb 太 tài "too much" is used:
<br/>
<span class="example">步行太遲 bù xíng tài chí "Walking too slowly."</span>
<br/>
<span class="example">卿太重 qīng tài zhòng "You are too heavy."</span>
</p>
<h3>57.5. The Phrase "當時 dāng shí" as an Adverb of Time</h3>
<p class="original">
Noun phrases with "時 shí" used to denote
adverbs of time (當是時 dāng shì shí, 當...時 dāng... shí
etc.) can be used in a shortened form, being reduced
to "當時 dāng shí "at that time":
<br/>
<span class="example">當時石崇有言 dāng shí shí chóng yǒu yán "At that time
Shi Chung used to say..."</span>
</p>
</span></p></div>
<h2>СПИСОК СЛОВ УРОКА</h2>
<div class="char-list"></div>
<script>
    // Укажи номер урока здесь
    const LESSON = parseInt((window.location.pathname.match(/\/lesson(\d+)(?:\/|$)/) || [])[1] || '1');

    // Находим все иероглифы этого урока из charData
    const lessonChars = Object.entries(charData)
        .filter(([char, data]) => data.lesson === LESSON)
        .sort(([charA, dataA], [charB, dataB]) => {
            // Сортировка по пиньиню (опционально)
            return dataA.pinyin.localeCompare(dataB.pinyin, 'zh');
        });

    // Получаем контейнер
    const charList = document.querySelector('.char-list');

    // Очищаем (на всякий случай)
    charList.innerHTML = '';

    // Генерируем элементы
    lessonChars.forEach(([char, data]) => {
        const item = document.createElement('div');
        item.className = 'char-item';

        item.innerHTML = `
            <span>${char}<span class="inline-pinyin">${data.pinyin}</span></span>
            <div class="char-tooltip">${data.meaning}</div>
        `;

        charList.appendChild(item);
    });
</script>
<div class="lexicon">
<h2>LEXICAL COMMENTARY</h2>
<h3>57.A. Song Dingbo of Nanyang</h3>
<p class="original">
In ancient China in the last centuries BC, it became customary to indicate a person's place of origin when mentioning them.
This was due to the fact that censuses were already conducted during the Han Dynasty, which indicated a person's affiliation with a particular administrative unit.
<br/><br/>
Nanyang is the name of one of the counties that existed in China
since the Qin Dynasty. This county was located in the southwestern part of modern-day Henan Province. The capital city of
Nanyang County is Wan.
</p>
<h3>57.B. Good and Evil Spirits</h3>
<p class="original">
The ancient Chinese believed in the existence of good and evil spirits (神 shén and 鬼 guǐ), into which the souls of the deceased would transform.
<br/><br/>
Adventures involving evil spirits—the souls of the dead—became a favorite
plot in xiaoshuo novels during the Southern and Northern Dynasties.
<br/><br/>
Evil spirits (鬼 guǐ) appear in human form, but differ from humans in that they move completely silently
and weigh nothing.
<br/><br/>
On the other hand, in the first centuries of the Common Era, atheistic ideas developed in China, denying the immortality of the soul and the afterlife. The philosopher Fan Zhen is famous for his treatise on this topic. </p>
<h3>57.B. Fifteen Hundred Coins</h3>
<p class="original">
The oldest metal coin appeared in China during the Zhanguo era. Various coin types were common in the kingdoms of
that time: in the eastern kingdoms, they were shaped
like knives, in the central kingdoms, spade-shaped coins, and in the west, round disks with a hole.
<br/><br/>
<br/><br/>
After Qin Shi Huang unified the country, he carried out a reform aimed at unifying the monetary unit.
A round coin with a square hole became the unified standard, circulating throughout the country.
<br/><br/>
Subsequently, this coin became traditional in China. It was
cast from bronze and had a constant weight denomination, usually indicated in an inscription on it. </p>
<div style="text-align: center; margin: 20px 0;">
<img alt="Metal coin of the Han Dynasty" class="original" src="./img/page_5_img_1.jpeg" style="border: none; padding: 0; max-width: 100%;"/>
<p class="footer" style="margin-top: 8px; border-top: none; padding-top: 0;">Metal coin<br/>of the Han Dynasty </p>
</div>
</div>
<div class="assignment">
<h2>ASSIGNMENT FOR INDEPENDENT STUDY</h2>
<ol>
<li>Rewrite the text and add punctuation.</li>
<li>Translate the text into English.</li>
<li>List all the meanings of the function word 是shì.</li>
</ol>
</div>
<div class="footer">
Textbook: V. A. Kryukov — Postclassical Ancient Chinese.<br/>
Reconstructed using OCR, preserving the author's style and adding pinyin.<br/>
All characters are from Lessons 1–57, or from cyclic characters (甲子 – 癸亥).
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggle = document.getElementById('fontToggle');
        const label = document.getElementById('toggleLabel');
        const styleSheet = document.getElementById('2change');

        const normalCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        const oracleCSS = `
            .oracle-table {
                border-collapse: collapse;
                margin: 20px auto;
                font-family: 'Jiaguwen', 'Noto Serif CJK SC', 'KaiTi', serif;
                font-size: 1.3em;
                table-layout: fixed;
                width: 95%;
                max-width: 1200px;
            }
            .oracle-table td {
                padding: 6px 8px;
                border: 1px solid #d4d4d4;
                text-align: center;
                position: relative;
                word-break: keep-all;
                white-space: nowrap;
            }
            .line-num, .col-num {
                background-color: #f0f4f8;
                color: #1a4f72;
                font-weight: bold;
                font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
                font-size: 0.85em;
                white-space: nowrap;
            }
        `;

        styleSheet.textContent = normalCSS;

        toggle.addEventListener('change', function () {
            if (toggle.checked) {
                styleSheet.textContent = oracleCSS;
                label.textContent = 'Оракульный вид';
            } else {
                styleSheet.textContent = normalCSS;
                label.textContent = 'Обычный вид';
            }
        });
    });
</script>
<script id="help" src="../help.js"></script>
<script defer="True" src="../sender.js"></script></body>
</html>
